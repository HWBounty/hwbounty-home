{"version":3,"sources":["redux/actions/moduleActions.js","components/Modules/Calculator/History.js","util/latex/preprocessMathQuill.js","components/Modules/Calculator/CalcTools.js","components/Modules/Calculator/Calculator.js","components/Modules/Calculator/CalcSettings.js","components/Modules/Calculator/CalculatorModule.js","pages/modules.js"],"names":["calc_setInput","latex","dispatch","type","CALC_SET_INPUT","payload","useStyles","makeStyles","theme","root","flex","overflow","connect","state","module","props","history","calculator","classes","HistoryButton","ans","ListItem","button","onClick","style","cursor","Typography","className","List","React","Children","toArray","map","x","Divider","mathquillToMathJS","fromMQ","noBraceSub","convertSubscript","fracToDivision","tex","mathjs","reduce","acc","r","str","find","replaceWith","replace","RegExp","escapeRegExp","expr","subStart","indexOf","numStart","length","closingBrace","slice","frac","fracStart","divIdx","startIdx","braces","openingBrace","undefined","Error","stack","j","findClosingBrace","numPadRoot","symbolPadRoot","backgroundColor","SymbolButton","symbol","Button","variant","NumPad","user","UI","NumRow","arr","Grid","container","item","spacing","wrap","num","disabled","direction","SymbolPad","obj","addStyles","spreadIt","paper","height","rootPadding","flexDirection","display","symbolPadGrid","paddingTop","LatexInput","onChange","onSubmit","mathquillDidMount","fontSize","config","autoCommands","autoOperatorNames","handlers","enter","calc_addHistory","CALC_PUSH_HISTORY","parser","input","useState","answer","setAnswer","error","setError","mathField","useRef","Paper","InputBase","inputComponent","inputProps","val","evaluate","math","precision","err","console","log","current","value","fullWidth","xs","write","focus","cmd","color","calc_addVariable","variable","CALC_ADD_VARIABLE","calc_removeVariable","CALC_REMOVE_VARIABLE","withStyles","variableWrapper","VariableField","variables","name","startVal","setDisabled","setValue","inputRef","useEffect","select","handleSubmit","event","preventDefault","set","TextField","placeholder","target","onBlur","Object","keys","getAll","key","get","margin","marginLeft","marginRight","marginTop","paddingLeft","paddingRight","minHeight"],"mappings":"4PAaaA,EAAgB,SAACC,GAAD,OAAW,SAACC,GACvCA,EAAS,CAAEC,KAAMC,IAAgBC,QAASJ,M,6CCGtCK,EAAYC,KAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJC,KAAM,EACNC,SAAU,YA8CCC,eAJS,SAACC,GAAD,MAAY,CAClCC,OAAQD,EAAMC,UAGwB,CAAEd,iBAA3BY,EA1CQ,SAACG,GAAW,IAGfC,EAGdD,EAJFD,OACEG,WAAcD,QAEhBhB,EACEe,EADFf,cAGIkB,EAAUZ,IAEVa,EAAgB,SAACJ,GAAW,IACxBd,EAAec,EAAfd,MAAOmB,EAAQL,EAARK,IACf,OACE,eAACC,EAAA,EAAD,CAAUC,QAAM,EAACC,QAAS,kBAAMvB,EAAcC,IAA9C,UACE,cAAC,kBAAD,CAAiBuB,MAAO,CAAEd,KAAM,EAAGe,OAAQ,WAA3C,SACGxB,IAEH,eAACyB,EAAA,EAAD,gBAAeN,SAKrB,OACE,qBAAKO,UAAWT,EAAQT,KAAxB,SACE,cAACmB,EAAA,EAAD,UACGC,IAAMC,SAASC,QACdf,EAAQgB,KAAI,SAACC,GAAD,OACV,qCACE,cAACC,EAAA,EAAD,IACA,cAACf,EAAD,CAAelB,MAAOgC,EAAEhC,MAAOmB,IAAKa,EAAEb,oBCtCrC,SAASe,EAAkBC,GACxC,IAyBMC,EAAaC,EADJC,EAAeH,IAE9B,MA1BqB,CACnB,CAAEI,IAAK,uBAAwBC,OAAQ,QACvC,CAAED,IAAK,wBAAyBC,OAAQ,SACxC,CAAED,IAAK,uBAAwBC,OAAQ,QACvC,CAAED,IAAK,sBAAuBC,OAAQ,OACtC,CAAED,IAAK,uBAAwBC,OAAQ,QACvC,CAAED,IAAK,sBAAuBC,OAAQ,OACtC,CAAED,IAAK,sBAAuBC,OAAQ,OACtC,CAAED,IAAK,wBAAyBC,OAAQ,SACxC,CAAED,IAAK,wBAAyBC,OAAQ,SACxC,CAAED,IAAK,wBAAyBC,OAAQ,SACxC,CAAED,IAAK,0BAA2BC,OAAQ,WAC1C,CAAED,IAAK,0BAA2BC,OAAQ,WAC1C,CAAED,IAAK,0BAA2BC,OAAQ,WAC1C,CAAED,IAAK,SAAUC,OAAQ,OACzB,CAAED,IAAK,SAAUC,OAAQ,IACzB,CAAED,IAAK,UAAWC,OAAQ,IAC1B,CAAED,IAAK,IAAKC,OAAQ,KACpB,CAAED,IAAK,IAAKC,OAAQ,KACpB,CAAED,IAAK,IAAKC,OAAQ,KACpB,CAAED,IAAK,KAAMC,OAAQ,MAMHC,QAClB,SAACC,EAAKC,GAAN,OA8DuBC,EA9DAF,EA8DKG,EA9DAF,EAAC,IA8DKG,EA9DIH,EAAC,OAgElCC,EAAIG,QAAQ,IAAIC,OARlB,SAAsBJ,GAG3B,OAAOA,EAAIG,QAAQ,sBAAuB,QAKZE,CAAaJ,GAAO,KAAMC,GAFnD,IAAoBF,EAAKC,EAAMC,IA7DlCV,GAQG,SAASC,EAAiBa,GAC/B,IACMC,EAAWD,EAAKE,QADV,MAGZ,GAAID,EAAW,EACb,OAAOD,EAGT,IAAMG,EAAWF,EAPL,KAOoBG,OAC1BC,EAAeL,EAAKE,QAAQ,IAAKC,GAOvC,OAAOhB,EALLa,EAAKM,MAAM,EAAGL,GACd,IACAD,EAAKM,MAAMH,EAAUE,GACrBL,EAAKM,MAAMD,EAAe,IASvB,SAASjB,EAAeY,GAC7B,IAAMO,EAAO,SACPC,EAAYR,EAAKE,QAAQK,GACzBJ,EAAWK,EAAYD,EAAKH,OAElC,GAAII,EAAY,EACd,OAAOR,EAGT,IAAMS,EA0BD,SAA0Bf,EAAKgB,GACpC,IAAMC,EAAS,CACb,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KAGDC,EAAelB,EAAIgB,GAEnBL,EAAeM,EAAOC,GAE5B,QAAqBC,IAAjBR,EACF,MAAMS,MAAM,GAAD,OACNpB,EADM,0DAC+CgB,EAD/C,MAQb,IAHA,IAAIK,EAAQ,EAGHC,EAAIN,EAAW,EAAGM,EAAItB,EAAIU,OAAQY,IAMzC,GALItB,EAAIsB,KAAOJ,EACbG,GAAS,EACArB,EAAIsB,KAAOX,IACpBU,IAAU,GAEE,IAAVA,EACF,OAAOC,EAKX,MAAMF,MAAM,GAAD,OACNpB,EADM,+CACoCgB,EADpC,yBA3DIO,CAAiBjB,EAAMG,GAQtC,OAAOf,EALLY,EAAKM,MAAM,EAAGE,GACdR,EAAKM,MAAMH,EAAUM,EAAS,GAC9B,IACAT,EAAKM,MAAMG,EAAS,I,aChFlBtD,EAAYC,IAAW,CAC3B8D,WAAY,GACZC,cAAe,GACfhD,OAAQ,CACNiD,gBAAiB,SAAAxD,GAAK,OAAoB,IAAhBA,EAAMP,MAAc,gBAAkB,uBAK9DgE,EAAe,SAACzD,GAAW,IACvBQ,EAA2BR,EAA3BQ,QAAStB,EAAkBc,EAAlBd,MAAOwE,EAAW1D,EAAX0D,OAClBvD,EAAUZ,EAAUS,GAC1B,OACE,cAAC2D,EAAA,EAAD,CACE/C,UAAWT,EAAQI,OACnBqD,QAAQ,YACRpD,QAAS,kBAAMA,EAAQtB,IAHzB,SAKGwE,KAQMG,EAAShE,aAJE,SAACC,GAAD,MAAY,CAClCgE,KAAMhE,EAAMgE,KACZC,GAAIjE,EAAMiE,MAEUlE,EAAyB,SAACG,GAC9C,IAAMG,EAAUZ,EAAUS,GAClBQ,EAAYR,EAAZQ,QAEFwD,EAAS,SAAC,GAAa,IAAXC,EAAU,EAAVA,IAChB,OACE,cAACC,EAAA,EAAD,CAAMC,WAAS,EAACC,MAAI,EAACC,QAAS,EAAGC,KAAK,SAAtC,SACGxD,IAAMC,SAASC,QACdiD,EAAIhD,KAAI,SAACsD,GAAD,OACN,cAACL,EAAA,EAAD,CAAME,MAAI,EAAV,SACW,OAARG,EACC,cAAC,EAAD,CAAc/D,QAASA,EAAStB,MAAOqF,EAAKb,OAAQa,IAEpD,cAACZ,EAAA,EAAD,CAAQ/C,UAAWT,EAAQI,OAAQiE,UAAQ,aAQzD,OACE,eAACN,EAAA,EAAD,CAAMC,WAAS,EAACE,QAAS,EAAGC,KAAK,SAASG,UAAU,SAApD,UACE,cAACT,EAAD,CAAQC,IAAK,CAAC,EAAG,EAAG,KACpB,cAACD,EAAD,CAAQC,IAAK,CAAC,EAAG,EAAG,KACpB,cAACD,EAAD,CAAQC,IAAK,CAAC,EAAG,EAAG,KACpB,cAACD,EAAD,CAAQC,IAAK,CAAC,KAAM,EAAG,aAKhBS,EAAY,SAAC1E,GAAW,IAC3BQ,EAAYR,EAAZQ,QAUR,OACE,8BACE,cAAC0D,EAAA,EAAD,CAAMC,WAAS,EAACE,QAAS,EAAzB,SACE,cAACH,EAAA,EAAD,CAAMC,WAAS,EAACC,MAAI,EAACC,QAAS,EAA9B,SACGvD,IAAMC,SAASC,QAbR,CACd,CAAE0C,OAAQ,IAAKxE,MAAO,KACtB,CAAEwE,OAAQ,IAAKxE,MAAO,KACtB,CAAEwE,OAAQ,IAAKxE,MAAO,QACtB,CAAEwE,OAAQ,IAAKxE,MAAO,QACtB,CAAEwE,OAAQ,SAAKxE,MAAO,QACtB,CAAEwE,OAAQ,IAAKxE,MAAO,MAQN+B,KAAI,SAAC0D,GACX,OACE,cAACT,EAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAAC,EAAD,CACE5D,QAASA,EACTtB,MAAOyF,EAAIzF,MACXwE,OAAQiB,EAAIjB,sB,OC5DhCkB,sBAEA,IAAMrF,EAAYC,KAAW,SAACC,GAAD,mBAAC,eACzBA,EAAMoF,UADkB,IAE3BC,MAAM,2BACDrF,EAAMoF,SAASC,OADf,IAEHC,OAAQ,SAEVC,YAAY,2BACPvF,EAAMoF,SAASG,aADT,IAETC,cAAe,SACfC,QAAS,OACTH,OAAQ,SAEVI,cAAe,CACbC,WAAY,SAIVC,EAAa,SAACrF,GAAW,IACrBsF,EAA0CtF,EAA1CsF,SAAUC,EAAgCvF,EAAhCuF,SAAUC,EAAsBxF,EAAtBwF,kBAE5B,OACE,cAAC,oBAAD,CACEtG,MAAM,GACNuB,MAAO,CAAEsE,OAAQ,OAAQU,SAAU,GAAI9F,KAAM,GAC7C+F,OAAQ,CACNC,aAAc,oBACdC,kBACE,uFACFC,SAAU,CACRC,MAAOP,IAGXD,SAAUA,EACVE,kBAAmBA,KA+FV3F,eAJS,SAACC,GAAD,MAAY,CAClCC,OAAQD,EAAMC,UAGwB,CAAEgG,gBJvJX,SAAC7G,GAAD,OAAW,SAACC,GACzCA,EAAS,CAAEC,KAAM4G,IAAmB1G,QAASJ,MIsJYD,iBAA5CY,EA1FW,SAACG,GAAW,IAElCiG,EAMEjG,EANFiG,OAIAF,GAEE/F,EALFD,OACEG,WAAcgG,MAIdlG,EAFF+F,iBACA9G,EACEe,EADFf,cAGIkB,EAAUZ,IAVmB,EAYP4G,mBAAS,IAZF,mBAY5BC,EAZ4B,KAYpBC,EAZoB,OAaTF,oBAAS,GAbA,mBAa5BG,EAb4B,KAarBC,EAbqB,KAe7BC,EAAYC,iBAAO,MAsCzB,OACE,cAACC,EAAA,EAAD,CAAO9F,UAAWT,EAAQ2E,MAA1B,SACE,sBAAKlE,UAAWT,EAAQ6E,YAAxB,UACE,cAAC,EAAD,IACA,cAAC2B,EAAA,EAAD,CACEC,eAAgBvB,EAChBwB,WAAY,CACVtB,SA3CW,SAACuB,GACpB,IAIE,IAAIzG,EAAM4F,EAAOc,SAAS3F,EAAkB0F,EAAI5H,UAChDmB,EAAM2G,KAAY3G,EAAK,CAAE4G,UAAW,KACpCZ,EAAU,GAAD,OAAIhG,IACbkG,GAAS,GACTR,EAAgB,CAAE7G,MAAO4H,EAAI5H,QAASmB,IAAI,GAAD,OAAKA,KAC9CpB,EAAc,IACd,MAAOiI,GACPC,QAAQC,IAAIF,GACZb,EAAU,aACVE,GAAS,KA8BHjB,SAtBW,SAACwB,GACpB7H,EAAc,GAAD,OAAI6H,EAAMA,EAAI5H,QAAU,MAsB7BsG,kBA3BmB,SAACsB,GAC5BN,EAAUa,QAAUP,IA6BdQ,MAAM,GACNC,WAAS,IAEX,eAACrD,EAAA,EAAD,CAAMC,WAAS,EAACE,QAAS,EAAGzD,UAAWT,EAAQgF,cAA/C,UACE,cAACjB,EAAA,EAAD,CAAME,MAAI,EAACoD,IAAE,EAAb,SACE,cAAC3D,EAAD,CAAQrD,QA3BU,SAAC+D,GAC3BiC,EAAUa,QAAQI,MAAMlD,GACxBiC,EAAUa,QAAQK,aA2BZ,cAACxD,EAAA,EAAD,CAAME,MAAI,EAACoD,IAAE,EAAb,SACE,cAAC,EAAD,CAAWhH,QAzBO,SAACkD,GAC3B8C,EAAUa,QAAQM,IAAIjE,GACtB8C,EAAUa,QAAQK,gBA0Bd,cAAC/G,EAAA,EAAD,CAAYiH,MAAOtB,EAAQ,QAAU,UAArC,SAAiDF,Y,6BCjC1CvG,eAJS,SAACC,GAAD,MAAY,CAClCC,OAAQD,EAAMC,UAGwB,CACtC8H,iBLjG8B,SAACC,GAAD,OAAc,SAAC3I,GAC7CA,EAAS,CAAEC,KAAM2I,IAAmBzI,QAASwI,MKiG7CE,oBL/FiC,SAACF,GAAD,OAAc,SAAC3I,GAChDA,EAAS,CAAEC,KAAM6I,IAAsB3I,QAASwI,OK4FnCjI,CAGZqI,KAhGY,SAACzI,GAAD,mBAAC,eACXA,EAAMoF,UADI,IAEbC,MAAM,2BACDrF,EAAMoF,SAASC,OADf,IAEHC,OAAQ,OACRnF,SAAU,OACVsF,QAAS,OACTD,cAAe,WAEjBkD,gBAAiB,CACfxI,KAAM,OAsFPuI,EAlFyB,SAAClI,GAAW,IAEpCG,EAOEH,EAPFG,QACA8F,EAMEjG,EANFiG,OAQImC,GAFFpI,EALFD,OACEG,WAAcmI,UAIdrI,EAFF6H,iBAEE7H,EADFgI,oBAGoB,SAAChI,GAAW,IACxBsI,EAAmBtI,EAAnBsI,KAAMC,EAAavI,EAAbuI,SADiB,EAGCpC,oBAAS,GAHV,mBAGxB3B,EAHwB,KAGdgE,EAHc,OAILrC,mBAASoC,GAJJ,mBAIxBjB,EAJwB,KAIjBmB,EAJiB,KAMzBC,EAAWjC,iBAAO,MAExBkC,qBAAU,WACJnE,IACJkE,EAASrB,QAAQK,QACjBgB,EAASrB,QAAQuB,YAChB,CAACpE,IAEJ,IAAMqE,EAAe,SAACC,GACpBA,EAAMC,iBACNP,GAAY,GACZ,IACEvC,EAAO+C,IAAIV,EAAMhB,GACjB,MAAOJ,GACPC,QAAQC,IAAIF,KAahB,OACE,eAACvD,EAAA,EAAD,CAAQnD,QAVY,WACpBgI,GAAY,IASZ,UACE,cAAC7H,EAAA,EAAD,CAAYiD,QAAQ,QAApB,SAA6B0E,IAC7B,cAAC3H,EAAA,EAAD,CAAYiD,QAAQ,QAApB,eACA,sBAAM2B,SAAUsD,EAAhB,SACE,cAACI,EAAA,EAAD,CACErF,QAAQ,WACRY,SAAUA,EACV0E,YAAa5B,EACbA,MAAOA,EACPoB,SAAUA,EACVpD,SAhBqB,SAACwD,GAE5BL,EAASK,EAAMK,OAAO7B,QAehB8B,OAAQP,WAOlB,OACE,eAACnC,EAAA,EAAD,CAAO9F,UAAWT,EAAQ2E,MAA1B,UACE,qBAAKlE,UAAWT,EAAQgI,gBAAxB,SACGkB,OAAOC,KAAKrD,EAAOsD,UAAUtI,KAAI,SAACuI,GAAD,OAChC,cAACpB,EAAD,CAAeE,KAAMkB,EAAKjB,SAAUtC,EAAOwD,IAAID,UAGnD,cAAC,IAAD,WClFAvD,E,QAASe,IA0BAkB,OAxBA,SAACzI,GAAD,mBAAC,eACXA,EAAMoF,UADI,IAEbnF,KAAM,CACJgK,OAAQ,YAqBGxB,EAjBiB,SAAClI,GAAW,IAClCG,EAAYH,EAAZG,QAER,OACE,eAAC+D,EAAA,EAAD,CAAMC,WAAS,EAACE,QAAS,EAAGzD,UAAWT,EAAQT,KAA/C,UACE,cAACwE,EAAA,EAAD,CAAME,MAAI,EAACoD,GAAI,EAAf,SACE,cAACd,EAAA,EAAD,CAAO9F,UAAWT,EAAQ2E,MAA1B,SACE,cAAC,EAAD,CAAYmB,OAAQA,QAGxB,cAAC/B,EAAA,EAAD,CAAME,MAAI,EAACoD,GAAI,EAAf,SACE,cAAC,EAAD,CAAcvB,OAAQA,YCXfiC,eAtBA,SAACzI,GAAD,mBAAC,eACXA,EAAMoF,UADI,IAEbnF,KAAM,CACJiK,WAAY,IACZC,YAAa,GACbC,UAAW,GACXC,YAAa,GACbC,aAAc,GACd3E,WAAY,GACZ4E,UAAW,WAaA9B,EATC,SAAClI,GAAW,IAClBG,EAAYH,EAAZG,QACR,OACE,qBAAKS,UAAWT,EAAQT,KAAxB,SACE,cAAC,EAAD","file":"static/js/18.537d30ac.chunk.js","sourcesContent":["import {\n  CALC_PUSH_HISTORY,\n  CALC_SET_INPUT,\n  CALC_ADD_VARIABLE,\n  CALC_REMOVE_VARIABLE,\n  CALC_POP_HISTORY,\n} from \"../types\";\n\nexport const calc_addHistory = (latex) => (dispatch) => {\n  dispatch({ type: CALC_PUSH_HISTORY, payload: latex });\n  //dispatch({ type: CALC_POP_HISTORY });\n};\n\nexport const calc_setInput = (latex) => (dispatch) => {\n  dispatch({ type: CALC_SET_INPUT, payload: latex });\n};\nexport const calc_addVariable = (variable) => (dispatch) => {\n  dispatch({ type: CALC_ADD_VARIABLE, payload: variable });\n};\nexport const calc_removeVariable = (variable) => (dispatch) => {\n  dispatch({ type: CALC_REMOVE_VARIABLE, payload: variable });\n};\n","// React\nimport React, { useState } from \"react\";\n\n// MUI\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Typography from \"@material-ui/core/Typography\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\n\n// Redux\nimport { connect } from \"react-redux\";\nimport { calc_setInput } from \"../../../redux/actions/moduleActions\";\n\n// Math\nimport { StaticMathField } from \"react-mathquill\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flex: 1,\n    overflow: \"auto\",\n  },\n}));\n\nexport const History = (props) => {\n  const {\n    module: {\n      calculator: { history },\n    },\n    calc_setInput,\n  } = props;\n\n  const classes = useStyles();\n\n  const HistoryButton = (props) => {\n    const { latex, ans } = props;\n    return (\n      <ListItem button onClick={() => calc_setInput(latex)}>\n        <StaticMathField style={{ flex: 1, cursor: \"pointer\" }}>\n          {latex}\n        </StaticMathField>\n        <Typography>= {ans}</Typography>\n      </ListItem>\n    );\n  };\n\n  return (\n    <div className={classes.root}>\n      <List>\n        {React.Children.toArray(\n          history.map((x) => (\n            <>\n              <Divider />\n              <HistoryButton latex={x.latex} ans={x.ans} />\n            </>\n          ))\n        )}\n      </List>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  module: state.module,\n});\n\nexport default connect(mapStateToProps, { calc_setInput })(History);\n","/**\n * Thank you ChristopherChudzicki for this code! (copy-paste)\n *\n * Makes a series of replacements on MathQuill-generated LaTeX strings so that\n * they can be parsed by MathJS.\n *\n * Notes:\n *  1. This is pretty heuristic. Might discover updates needed.\n *  2. Much of this could be used to preprocess LaTeX generated by other means\n * (i.e., not MathQuill.) The main bit that is MathQuill-specific is probably\n * the operatorname replacements.\n *\n * @param  {string} fromMQ a MathQuill-generated LaTeX expression\n * @return {string} the input expression with LaTeX commands converted to mathjs\n */\nexport default function mathquillToMathJS(fromMQ) {\n  const replacements = [\n    { tex: \"\\\\operatorname{diff}\", mathjs: \"diff\" },\n    { tex: \"\\\\operatorname{pdiff}\", mathjs: \"pdiff\" },\n    { tex: \"\\\\operatorname{curl}\", mathjs: \"curl\" },\n    { tex: \"\\\\operatorname{div}\", mathjs: \"div\" },\n    { tex: \"\\\\operatorname{norm}\", mathjs: \"norm\" },\n    { tex: \"\\\\operatorname{mod}\", mathjs: \"mod\" },\n    { tex: \"\\\\operatorname{abs}\", mathjs: \"abs\" },\n    { tex: \"\\\\operatorname{unitT}\", mathjs: \"unitT\" },\n    { tex: \"\\\\operatorname{unitN}\", mathjs: \"unitN\" },\n    { tex: \"\\\\operatorname{unitB}\", mathjs: \"unitB\" },\n    { tex: \"\\\\operatorname{arccosh}\", mathjs: \"arccosh\" },\n    { tex: \"\\\\operatorname{arcsinh}\", mathjs: \"arcsinh\" },\n    { tex: \"\\\\operatorname{arctanh}\", mathjs: \"arctanh\" },\n    { tex: \"\\\\cdot\", mathjs: \" * \" },\n    { tex: \"\\\\left\", mathjs: \"\" },\n    { tex: \"\\\\right\", mathjs: \"\" },\n    { tex: \"{\", mathjs: \"(\" },\n    { tex: \"}\", mathjs: \")\" },\n    { tex: \"~\", mathjs: \" \" },\n    { tex: \"\\\\\", mathjs: \" \" },\n  ];\n\n  // remove fractions, then apply replacements\n  const noFrac = fracToDivision(fromMQ);\n  const noBraceSub = convertSubscript(noFrac);\n  return replacements.reduce(\n    (acc, r) => replaceAll(acc, r[\"tex\"], r[\"mathjs\"]),\n    noBraceSub\n  );\n}\n\n/**\n * Recursively removes braces from LaTeX subscripts\n *   - example: x_{12foo_{bar123_{evenlower}}} --> x_12foo_bar123_evenlower\n */\nexport function convertSubscript(expr) {\n  const sub = \"_{\";\n  const subStart = expr.indexOf(sub);\n\n  if (subStart < 0) {\n    return expr;\n  }\n\n  const numStart = subStart + sub.length;\n  const closingBrace = expr.indexOf(\"}\", numStart);\n  const newExpr =\n    expr.slice(0, subStart) +\n    \"_\" +\n    expr.slice(numStart, closingBrace) +\n    expr.slice(closingBrace + 1);\n\n  return convertSubscript(newExpr);\n}\n\n/**\n * Recursively replaces LaTeX fractions with normal divison\n *   - example: \\frac{a}{1 + \\frac{b}{c}} --> {a}/{1 + {b}/{c}}\n */\nexport function fracToDivision(expr) {\n  const frac = \"\\\\frac\";\n  const fracStart = expr.indexOf(frac);\n  const numStart = fracStart + frac.length;\n\n  if (fracStart < 0) {\n    return expr;\n  }\n\n  const divIdx = findClosingBrace(expr, numStart);\n  // Remove frac, and add \"/\"\n  const newExpr =\n    expr.slice(0, fracStart) +\n    expr.slice(numStart, divIdx + 1) +\n    \"/\" +\n    expr.slice(divIdx + 1);\n\n  return fracToDivision(newExpr);\n}\n\nexport function capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n}\n\nexport function escapeRegExp(str) {\n  // from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Using_Special_Characters\n  // $& means the whole matched string\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\n\nexport function replaceAll(str, find, replaceWith) {\n  // from https://stackoverflow.com/a/1144788/2747370\n  return str.replace(new RegExp(escapeRegExp(find), \"g\"), replaceWith);\n}\n\nexport function findClosingBrace(str, startIdx) {\n  const braces = {\n    \"[\": \"]\",\n    \"<\": \">\",\n    \"(\": \")\",\n    \"{\": \"}\",\n  };\n\n  const openingBrace = str[startIdx];\n\n  const closingBrace = braces[openingBrace];\n\n  if (closingBrace === undefined) {\n    throw Error(\n      `${str} does not contain an opening brace at position ${startIdx}.`\n    );\n  }\n\n  let stack = 1;\n\n  // eslint-disable-next-line no-plusplus\n  for (let j = startIdx + 1; j < str.length; j++) {\n    if (str[j] === openingBrace) {\n      stack += +1;\n    } else if (str[j] === closingBrace) {\n      stack += -1;\n    }\n    if (stack === 0) {\n      return j;\n    }\n  }\n\n  // stack !== 0\n  throw Error(\n    `${str} has a brace that opens at position ${startIdx} but does not close.`\n  );\n}\n","// React\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\n// MUI\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport { connect } from \"react-redux\";\n\nconst useStyles = makeStyles({\n  numPadRoot: {},\n  symbolPadRoot: {},\n  button: {\n    backgroundColor: props => props.theme === 1 ? \"rgb(63,63,63)\" : \"rgb(243,243,243)\",\n    //flex: 1,\n  },\n});\n\nconst SymbolButton = (props) => {\n  const { onClick, latex, symbol } = props;\n  const classes = useStyles(props);\n  return (\n    <Button\n      className={classes.button}\n      variant=\"contained\"\n      onClick={() => onClick(latex)}\n    >\n      {symbol}\n    </Button>\n  );\n};\nconst mapStateToProps = (state) => ({\n  user: state.user,\n  UI: state.UI,\n});\nexport const NumPad = connect(mapStateToProps)((props) => {\n  const classes = useStyles(props);\n  const { onClick } = props;\n\n  const NumRow = ({ arr }) => {\n    return (\n      <Grid container item spacing={1} wrap=\"nowrap\">\n        {React.Children.toArray(\n          arr.map((num) => (\n            <Grid item>\n              {num !== null ? (\n                <SymbolButton onClick={onClick} latex={num} symbol={num} />\n              ) : (\n                <Button className={classes.button} disabled />\n              )}\n            </Grid>\n          ))\n        )}\n      </Grid>\n    );\n  };\n  return (\n    <Grid container spacing={1} wrap=\"nowrap\" direction=\"column\">\n      <NumRow arr={[1, 2, 3]} />\n      <NumRow arr={[4, 5, 6]} />\n      <NumRow arr={[7, 8, 9]} />\n      <NumRow arr={[null, 0, \".\"]} />\n    </Grid>\n  );\n});\n\nexport const SymbolPad = (props) => {\n  const { onClick } = props;\n  const symbols = [\n    { symbol: \"+\", latex: \"+\" },\n    { symbol: \"-\", latex: \"-\" },\n    { symbol: \"*\", latex: \"cdot\" },\n    { symbol: \"/\", latex: \"frac\" },\n    { symbol: \"√\", latex: \"sqrt\" },\n    { symbol: \"^\", latex: \"^\" },\n  ];\n\n  return (\n    <div>\n      <Grid container spacing={1}>\n        <Grid container item spacing={1}>\n          {React.Children.toArray(\n            symbols.map((obj) => {\n              return (\n                <Grid item>\n                  <SymbolButton\n                    onClick={onClick}\n                    latex={obj.latex}\n                    symbol={obj.symbol}\n                  />\n                </Grid>\n              );\n            })\n          )}\n        </Grid>\n      </Grid>\n    </div>\n  );\n};\n\nNumPad.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nSymbolPad.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","// React\nimport React, { useState, useEffect, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\n\n// MUI\nimport InputBase from \"@material-ui/core/InputBase\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\n\n// Redux\nimport { connect } from \"react-redux\";\nimport {\n  calc_addHistory,\n  calc_setInput,\n} from \"../../../redux/actions/moduleActions\";\n\n// Components\nimport History from \"./History\";\n\n// Math related\nimport mathquillToMathJS from \"../../../util/latex/preprocessMathQuill\";\nimport { addStyles, EditableMathField, StaticMathField } from \"react-mathquill\";\nimport { NumPad, SymbolPad } from \"./CalcTools\";\nimport * as math from \"mathjs\";\n\n// required for latex to format correctly\naddStyles();\n\nconst useStyles = makeStyles((theme) => ({\n  ...theme.spreadIt,\n  paper: {\n    ...theme.spreadIt.paper,\n    height: \"80vh\",\n  },\n  rootPadding: {\n    ...theme.spreadIt.rootPadding,\n    flexDirection: \"column\",\n    display: \"flex\",\n    height: \"100%\",\n  },\n  symbolPadGrid: {\n    paddingTop: 15,\n  },\n}));\n\nconst LatexInput = (props) => {\n  const { onChange, onSubmit, mathquillDidMount } = props;\n\n  return (\n    <EditableMathField\n      latex=\"\"\n      style={{ height: \"auto\", fontSize: 50, flex: 1 }}\n      config={{\n        autoCommands: \"pi theta sqrt sum\",\n        autoOperatorNames:\n          \"sin cos tan feet ft inches in miles cm sech arcsec arsinh to rad deg radians degrees\",\n        handlers: {\n          enter: onSubmit,\n        },\n      }}\n      onChange={onChange}\n      mathquillDidMount={mathquillDidMount}\n    />\n  );\n};\n\nexport const Calculator = (props) => {\n  const {\n    parser,\n    module: {\n      calculator: { input },\n    },\n    calc_addHistory,\n    calc_setInput,\n  } = props;\n\n  const classes = useStyles();\n\n  const [answer, setAnswer] = useState(\"\");\n  const [error, setError] = useState(false);\n\n  const mathField = useRef(null);\n\n  const handleSubmit = (val) => {\n    try {\n      // const ans = CalculatorBackend.self.solveEquation(\n      //   mathquillToMathJS(val.latex())\n      // );\n      let ans = parser.evaluate(mathquillToMathJS(val.latex()));\n      ans = math.format(ans, { precision: 14 });\n      setAnswer(`${ans}`);\n      setError(false);\n      calc_addHistory({ latex: val.latex(), ans: `${ans}` });\n      calc_setInput(\"\");\n    } catch (err) {\n      console.log(err);\n      setAnswer(\"ERROR!!!!\");\n      setError(true);\n    }\n  };\n\n  const handleMathquillMount = (val) => {\n    mathField.current = val;\n  };\n\n  const handleChange = (val) => {\n    calc_setInput(`${val ? val.latex() : \"\"}`);\n  };\n\n  const handleNumberPressed = (num) => {\n    mathField.current.write(num);\n    mathField.current.focus();\n  };\n\n  const handleSymbolPressed = (symbol) => {\n    mathField.current.cmd(symbol);\n    mathField.current.focus();\n  };\n\n  return (\n    <Paper className={classes.paper}>\n      <div className={classes.rootPadding}>\n        <History />\n        <InputBase\n          inputComponent={LatexInput}\n          inputProps={{\n            onSubmit: handleSubmit,\n            onChange: handleChange,\n            mathquillDidMount: handleMathquillMount,\n          }}\n          /*className={classes.input}*/\n          value=\"\"\n          fullWidth\n        ></InputBase>\n        <Grid container spacing={2} className={classes.symbolPadGrid}>\n          <Grid item xs>\n            <NumPad onClick={handleNumberPressed} />\n          </Grid>\n          <Grid item xs>\n            <SymbolPad onClick={handleSymbolPressed} />\n          </Grid>\n        </Grid>\n        <Typography color={error ? \"error\" : \"initial\"}>{answer}</Typography>\n      </div>\n    </Paper>\n  );\n};\n\nCalculator.propTypes = {\n  parser: PropTypes.any.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  module: state.module,\n});\n\nexport default connect(mapStateToProps, { calc_addHistory, calc_setInput })(\n  Calculator\n);\n","// React\nimport { useState, useEffect, useRef } from \"react\";\n\n// MUI\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\n\n// Redux\nimport { connect } from \"react-redux\";\nimport {\n  calc_addVariable,\n  calc_removeVariable,\n} from \"../../../redux/actions/moduleActions\";\n\nconst styles = (theme) => ({\n  ...theme.spreadIt,\n  paper: {\n    ...theme.spreadIt.paper,\n    height: \"80vh\",\n    overflow: \"auto\",\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  variableWrapper: {\n    flex: 1,\n  },\n});\n\nexport const CalcSettings = (props) => {\n  const {\n    classes,\n    parser,\n    module: {\n      calculator: { variables },\n    },\n    calc_addVariable,\n    calc_removeVariable,\n  } = props;\n\n  const VariableField = (props) => {\n    const { name, startVal } = props;\n\n    const [disabled, setDisabled] = useState(true);\n    const [value, setValue] = useState(startVal);\n\n    const inputRef = useRef(null);\n\n    useEffect(() => {\n      if (disabled) return;\n      inputRef.current.focus();\n      inputRef.current.select();\n    }, [disabled]);\n\n    const handleSubmit = (event) => {\n      event.preventDefault();\n      setDisabled(true);\n      try {\n        parser.set(name, value);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    const handleClicked = () => {\n      setDisabled(false);\n    };\n\n    const handleVariableChange = (event) => {\n      // change var given name and new val\n      setValue(event.target.value);\n    };\n\n    return (\n      <Button onClick={handleClicked}>\n        <Typography variant=\"body1\">{name}</Typography>\n        <Typography variant=\"body1\">=</Typography>\n        <form onSubmit={handleSubmit}>\n          <TextField\n            variant=\"outlined\"\n            disabled={disabled}\n            placeholder={value}\n            value={value}\n            inputRef={inputRef}\n            onChange={handleVariableChange}\n            onBlur={handleSubmit}\n          />\n        </form>\n      </Button>\n    );\n  };\n\n  return (\n    <Paper className={classes.paper}>\n      <div className={classes.variableWrapper}>\n        {Object.keys(parser.getAll()).map((key) => (\n          <VariableField name={key} startVal={parser.get(key)} />\n        ))}\n      </div>\n      <AddIcon />\n    </Paper>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  module: state.module,\n});\n\nexport default connect(mapStateToProps, {\n  calc_addVariable,\n  calc_removeVariable,\n})(withStyles(styles)(CalcSettings));\n","// React\nimport React, { useState, useEffect, useRef } from \"react\";\n\n// MUI\nimport InputBase from \"@material-ui/core/InputBase\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\n\n// Components\nimport Calculator from \"./Calculator\";\nimport CalcSettings from \"./CalcSettings\";\n\n// Math related\nimport mathquillToMathJS from \"../../../util/latex/preprocessMathQuill\";\nimport { addStyles, EditableMathField, StaticMathField } from \"react-mathquill\";\nimport * as math from \"mathjs\";\nimport { NumPad, SymbolPad } from \"./CalcTools\";\n\nconst parser = math.parser();\n\nconst styles = (theme) => ({\n  ...theme.spreadIt,\n  root: {\n    margin: \"auto\",\n  },\n});\n\nexport const CalculatorModule = (props) => {\n  const { classes } = props;\n\n  return (\n    <Grid container spacing={2} className={classes.root}>\n      <Grid item xs={8}>\n        <Paper className={classes.paper}>\n          <Calculator parser={parser} />\n        </Paper>\n      </Grid>\n      <Grid item xs={4}>\n        <CalcSettings parser={parser} />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default withStyles(styles)(CalculatorModule);\n","// React\n\nimport { Paper } from \"@material-ui/core\";\nimport CalculatorModule from \"../components/Modules/Calculator/CalculatorModule\";\n\n// MUI Stuff\nimport withStyles from \"@material-ui/core/styles/withStyles\";\n\nconst styles = (theme) => ({\n  ...theme.spreadIt,\n  root: {\n    marginLeft: 100, // temporary until john fixes his stuff\n    marginRight: 30,\n    marginTop: 50,\n    paddingLeft: 50,\n    paddingRight: 50,\n    paddingTop: 30,\n    minHeight: \"90%\",\n  },\n});\n\nconst Modules = (props) => {\n  const { classes } = props;\n  return (\n    <div className={classes.root}>\n      <CalculatorModule />\n    </div>\n  );\n};\n\nexport default withStyles(styles)(Modules);\n"],"sourceRoot":""}