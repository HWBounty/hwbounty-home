{"version":3,"sources":["pages/setSchedule.js"],"names":["SetSchedule","props","state","scheduleData","fetching","tab","a","console","log","this","Promise","all","axios","get","location","pathname","split","pop","catch","er","trace","res","selfData","courses","data","nameOverrides","JSON","parse","schedule","assign","self","section","setState","periods","Set","forEach","x","y","add","period","Array","from","keys","setting","periodChoices","sch","post","scheduleID","classes","status","href","parseAllPeriods","options","map","id","name","course_title","concat","style","width","minWidth","margin","required","labelId","value","onChange","event","obj","target","handleChange","React","Children","toArray","option","display","paddingBottom","paddingLeft","paddingRight","textAlign","verticalAlign","variant","height","marginRight","src","user","pfp","align","publicID","marginLeft","moment","parseInt","lastUpdated","fromNow","description","handleDropdowns","paddingTop","borderTop","onClick","ev","handleSet","fetchScheduleData","Component","connect","withRouter"],"mappings":"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","file":"static/js/16.c6b1787e.chunk.js","sourcesContent":["import { Avatar, Button, Card, Container, FormControl, Grid, InputBase, InputLabel, List, MenuItem, MuiThemeProvider, Paper, Select, Tab, Tabs, Typography } from \"@material-ui/core\";\r\nimport React, { useState } from \"react\";\r\nimport { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { connect } from \"react-redux\";\r\nimport moment from \"moment\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nclass SetSchedule extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tscheduleData: null,\r\n\t\t\tfetching: false,\r\n\t\t\ttab: 0,\r\n\t\t}\r\n\t}\r\n\tasync fetchScheduleData() {\r\n\t\tconsole.log(\"FETCHING\")\r\n\t\tif (this.state.scheduleData) return console.log(this.state.scheduleData);\r\n\t\ttry {\r\n\t\t\t// eslint-disable-next-line no-restricted-globals\r\n\t\t\tlet [res, selfData, courses] = await Promise.all([axios.get(`https://api.hwbounty.help/schedules/view/${this.props.location.pathname.split(\"/\").pop()}`).catch(er => console.log), axios.get(`https://api.hwbounty.help/@me`).catch(console.trace), axios(`https://api.hwbounty.help/sgy/getCourses`).catch(console.trace)]);\r\n\t\t\tif (res.data) {\r\n\t\t\t\tres.data.nameOverrides = JSON.parse(res.data.nameOverrides);\r\n\t\t\t\tres.data.schedule = JSON.parse(res.data.schedule);\r\n\t\t\t\tlet assign = {\r\n\t\t\t\t\tscheduleData: res.data,\r\n\t\t\t\t}\r\n\t\t\t\tif (selfData.data) assign.self = selfData.data;\r\n\t\t\t\tif (courses.data) assign.courses = courses.data.section;\r\n\t\t\t\tthis.setState(assign);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.trace(error);\r\n\t\t\tthis.setState({});\r\n\t\t}\r\n\r\n\r\n\t}\r\n\tcomponentDidMount(props) {\r\n\t\tthis.props = props;\r\n\t}\r\n\tparseAllPeriods(schedule) {\r\n\t\tlet periods = new Set();\r\n\t\t[\"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\", \"sunday\"].forEach(x => {\r\n\t\t\tschedule[x].forEach(y => {\r\n\t\t\t\tperiods.add(y.period);\r\n\t\t\t})\r\n\t\t})\r\n\t\treturn Array.from(periods.keys());\r\n\t}\r\n\tasync handleSet(self) {\r\n\t\tif (self.state.setting) return;\r\n\t\tself.setState({setting: true});\r\n\t\tlet periodChoices = self.state.periodChoices;\r\n\t\t// eslint-disable-next-line no-restricted-globals\r\n\t\tlet sch = this.props.location.pathname.split(\"/\").pop();\r\n\t\tconsole.log(sch);\r\n\t\tlet res = await axios.post(`https://api.hwbounty.help/schedules/set`, {\r\n\t\t\tscheduleID: sch,\r\n\t\t\tclasses: periodChoices\r\n\t\t}).catch(console.trace);\r\n\t\tif (res.status === 200) {\r\n\t\t\t// eslint-disable-next-line no-restricted-globals\r\n\t\t\tlocation.href = \"https://hwbounty.help\";\r\n\t\t}else{\r\n\t\t\tself.setState({setting:false})\r\n\t\t}\r\n\t}\r\n\thandleDropdowns(self) {\r\n\t\tlet courses = self.state.courses;\r\n\t\tlet periods = this.parseAllPeriods(self.state.scheduleData.schedule);\r\n\t\tlet options = courses.map(x => {\r\n\t\t\treturn { id: x.id, name: x.course_title };\r\n\t\t}).concat({ id: \"None\", name: \"None\" });\r\n\t\tlet nameOverrides = self.state.scheduleData.nameOverrides;\r\n\t\tconsole.log(periods);\r\n\t\tconst handleChange = (event, data) => {\r\n\t\t\tlet obj = self.state.periodChoices || {};\r\n\t\t\tobj[data] = event.target;\r\n\t\t\tself.setState({ periodChoices: obj });\r\n\t\t}\r\n\t\treturn periods.map(x => {\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<FormControl\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: \"30%\",\r\n\t\t\t\t\t\tminWidth: \"30%\",\r\n\t\t\t\t\t\tmargin: \"1.5%\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t\trequired>\r\n\t\t\t\t\t<InputLabel id={`inputLabel${x}`}>{nameOverrides[x] || x}</InputLabel>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tlabelId={`select${x}Label`}\r\n\t\t\t\t\t\tid={`select${x}`}\r\n\t\t\t\t\t\tvalue={self.state.periodChoices && self.state.periodChoices[`${x}`]}\r\n\t\t\t\t\t\tonChange={event => { handleChange(event, `${x}`) }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{React.Children.toArray(options.map(option => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<MenuItem value={option.id}>{option.name}</MenuItem>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}))}\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t</FormControl>\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\t// self.state\r\n\t}\r\n\trender() {\r\n\t\tif (!this.state.scheduleData && !this.state.fetching) {\r\n\t\t\tconsole.log(\"GoFetch\");\r\n\t\t\tthis.setState({ fetching: true });\r\n\t\t\tthis.fetchScheduleData();\r\n\t\t\treturn (<br />);\r\n\t\t}\r\n\t\t//Infinite Loop setstate somewhere; Figure out what\r\n\t\tif (this.state.scheduleData) {\r\n\t\t\t// this.setState({ fetching: false })\r\n\t\t\treturn (\r\n\t\t\t\t<Container>\r\n\t\t\t\t\t<Card style={{\r\n\t\t\t\t\t\tdisplay: \"inline-block\",\r\n\t\t\t\t\t\twidth: \"90%\",\r\n\t\t\t\t\t\tmargin: \"5%\",\r\n\t\t\t\t\t\tpaddingBottom: \"1vh\",\r\n\t\t\t\t\t\tpaddingLeft: \"5%\",\r\n\t\t\t\t\t\tpaddingRight: \"5%\",\r\n\t\t\t\t\t\ttextAlign: \"left\",\r\n\t\t\t\t\t\tverticalAlign: \"middle\",\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{/* <Typography variant=\"h4\">Stats</Typography> */}\r\n\t\t\t\t\t\t<Typography variant=\"h4\" style={{\r\n\t\t\t\t\t\t\ttextAlign: \"center\"\r\n\t\t\t\t\t\t}}>{this.state.scheduleData.name}</Typography>\r\n\t\t\t\t\t\t<Container style={{\r\n\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\theight: \"10%\",\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"caption\" style={{\r\n\t\t\t\t\t\t\t\t\ttextAlign: \"left\",\r\n\t\t\t\t\t\t\t\t\tmarginRight: \"1%\"\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tBy:\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Avatar src={this.state.scheduleData.user.pfp} align=\"left\" style={{\r\n\t\t\t\t\t\t\t\t\tdisplay: \"inline-block\",\r\n\t\t\t\t\t\t\t\t\tverticalAlign: \"middle\",\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{this.state.scheduleData.user.publicID}\r\n\t\t\t\t\t\t\t\t</Avatar>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"h5\" style={{\r\n\t\t\t\t\t\t\t\t\tverticalAlign: \"middle\",\r\n\t\t\t\t\t\t\t\t\tmarginLeft: \"1%\",\r\n\t\t\t\t\t\t\t\t\tdisplay: \"inline-block\",\r\n\t\t\t\t\t\t\t\t\t// fontSize: \"47px\",\r\n\t\t\t\t\t\t\t\t\t// height: \"40px\",\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{this.state.scheduleData.user.publicID}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tLast Updated: {moment(parseInt(this.state.scheduleData.lastUpdated)).fromNow()}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<ReactMarkdown>{this.state.scheduleData.description}</ReactMarkdown>\r\n\t\t\t\t\t\t<Container\r\n\t\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\twidth: \"100%\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t{React.Children.toArray(this.handleDropdowns(this))}\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t\t<Container style={{\r\n\t\t\t\t\t\t\tpaddingTop: \"1vh\",\r\n\t\t\t\t\t\t\tborderTop: \"2px solid rgba(160, 160, 160, 0.2)\",\r\n\t\t\t\t\t\t\ttextAlign: \"center\",\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<Button onClick={ev=>this.handleSet(this)}>Set Classes</Button>\r\n\t\t\t\t\t\t</Container>\r\n\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Container>\r\n\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n}\r\nconst DisplayedScheduleDay = (props) => {\r\n\tconst classes = props.classes;\r\n\tconst data = props.data;\r\n\tconst day = props.day;\r\n\tlet overrides = data.nameOverrides;\r\n\tlet dayschedule = data.schedule[[\"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\", \"sunday\"][day]].map(x => {\r\n\t\treturn Object.assign(x, {\r\n\t\t\tperiod: data.nameOverrides[x.period] || x.period,\r\n\t\t})\r\n\t});\r\n\tconsole.log(dayschedule);\r\n\tconst renderPeriods = () => {\r\n\t\tlet children = React.Children.toArray(dayschedule.map(x => {\r\n\t\t\treturn (\r\n\t\t\t\t<Container >\r\n\t\t\t\t\t<Typography variant=\"h4\">{x.period}</Typography>\r\n\t\t\t\t\t<Typography variant=\"h6\">{x.timeStart}</Typography>\r\n\t\t\t\t\t<Typography variant=\"h6\">{x.timeEnd}</Typography>\r\n\t\t\t\t</Container>\r\n\t\t\t)\r\n\t\t}));\r\n\t\tif (!children.length)\r\n\t\t\treturn (<Typography variant=\"h3\">No School Today!</Typography>);\r\n\t\treturn children;\r\n\t}\r\n\treturn (\r\n\t\t<Container style={{\r\n\t\t\tmarginBottom: \"5%\",\r\n\r\n\t\t}}>\r\n\t\t\t{renderPeriods()}\r\n\t\t</Container>\r\n\t)\r\n}\r\nexport default connect()(withRouter(SetSchedule));"],"sourceRoot":""}