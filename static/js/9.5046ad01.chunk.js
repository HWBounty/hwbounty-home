(this["webpackJsonphwbounty-home"]=this["webpackJsonphwbounty-home"]||[]).push([[9],{1329:function(t,e,n){"use strict";var a=n(49),o=n(50),i=function(){function t(){Object(a.a)(this,t),"granted"!==Notification.permission&&Notification.requestPermission()}return Object(o.a)(t,null,[{key:"pushNotification",value:function(t,e,n,a){try{return"granted"!==Notification.permission&&Notification.requestPermission(),new Notification(n||"HWBounty Notification",{body:a||"",icon:t,image:e})}catch(o){}}}]),t}();e.a=i},1505:function(t,e,n){"use strict";n.r(e);var a=n(49),o=n(50),i=n(88),r=n(87),c=n(41),s=n(197),d=n(1339),u=n(1314),l=n.n(u),h=n(0),m=n.n(h),f=n(53),p=n(45),b=n.n(p),j=n(67),v=n(193),w=n(1277),g=n(1271),O=n(299),S=n.n(O),y=n(1375),x=n.n(y),k=n(59),D=n.n(k),E=n(1374),N=n(1278),I=n(192),M=n(144),W=n(7),z=function(t){var e={gt:">"};return t.replace(/&(#(?:x[0-9a-f]+|\d+)|[a-z]+);?/gi,(function(t,n){return"#"===n[0]?String.fromCharCode("x"===n[1].toLowerCase()?parseInt(n.substr(2),16):parseInt(n.substr(1),10)):e.hasOwnProperty(n)?e[n]:t}))},C=S()({root:{border:0,borderRadius:"1.25vw!important",marginTop:"2vw",paddingBottom:10,display:"block",cursor:"pointer",position:"relative",boxShadow:"5px 5px 10px 1px rgba(0,0,0,0.6)!important"}}),J=function(t){var e,n=C(),a=t.theme,o=t.period,i=t.name,r=t.zoom,u=t.color,l=t.timeStart,h=t.timeEnd,f=t.tSS,p=t.tES,b=t.duration,j=Object(I.b)().enqueueSnackbar,O=0;O=Date.now()-h>0?100:Date.now()-l>0&&h-Date.now()>0?100*(Date.now()-l)/(h-l):0;var S=m.a.useState(!1),y=Object(c.a)(S,2),x=y[0],k=y[1],D=u.filter((function(t){return!0}));return D[2]=a?30:90,u[2]=a?20:75,Object(W.jsx)("div",{style:{marginBottom:"2vh"},children:Object(W.jsxs)(d.a,{className:n.root,onClick:function(){r.length?k(!x):j("No Zoom Links found for this class!")},style:{background:"linear-gradient(90deg, hsl(".concat(u[0],",").concat(u[1],"%,").concat(u[2],"%) 0%, hsl(").concat(u[0],",").concat(u[1],"%,").concat(u[2],"%) ").concat(O,"%, hsl(").concat(D[0],",").concat(D[1],"%,").concat(D[2],"%) ").concat(O+1e-6,"%, hsl(").concat(D[0],",").concat(D[1],"%,").concat(D[2],"%) 100%)"),borderRadius:20,padding:"10px"},children:[Object(W.jsx)(s.a,{variant:"h5",align:"left",style:{marginLeft:"4%",fontSize:Math.pow(window.innerWidth,.4)+32,marginBottom:window.innerWidth<=1250?"12%":"6%",position:"relative",marginTop:window.innerWidth<=1250?"4%":"2%"},children:i}),x?null:Object(W.jsxs)(s.a,{align:"left",variant:"h5",style:(e={fontSize:window.innerWidth<=1250?Math.pow(window.innerWidth,.3)+10:Math.pow(window.innerWidth,.4)+10,margin:10,marginBottom:10,marginTop:0,bottom:window.innerWidth<=1250?"70%":"1%",left:"4%"},Object(v.a)(e,"bottom","10%"),Object(v.a)(e,"position","absolute"),Object(v.a)(e,"fontFamily","'Nunito'"),e),children:[o,"\xa0\xa0\xa0",f,"-",p," (",Math.round(b/6e4)," mins)"]}),Object(W.jsx)(g.a,{in:x,children:m.a.Children.toArray(r.map((function(t){return Object(W.jsx)(w.a,{onClick:function(e){return function(t,e){t.stopPropagation();var n=window.open(e,"_blank","noopener,noreferrer");n&&(n.opener=null)}(e,t.link)},children:t.title})})))})]})})},A=function(){var t=Object(j.a)(b.a.mark((function t(e,n,a){var o,i,r,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,localStorage.getItem("DBIdToken")){t.next=3;break}throw new Error("something bad happened?");case 3:return localStorage.getItem("cachedSchedule")&&n(JSON.parse(localStorage.getItem("cachedSchedule"))),localStorage.getItem("cachedCourseInfo")&&e(JSON.parse(localStorage.getItem("cachedCourseInfo"))),t.next=7,Promise.all([D.a.get("https://api.hwbounty.help/schedule/@me").catch(console.trace),D.a.get("https://api.hwbounty.help/sgy/getZoomLinks").catch(console.trace)]);case 7:if(o=t.sent,i=Object(c.a)(o,2),r=i[0],s=i[1],(null===r||void 0===r?void 0:r.data)&&(null===s||void 0===s?void 0:s.data)&&500!==(null===r||void 0===r?void 0:r.status)){t.next=13;break}throw new Error("something bad happened?");case 13:localStorage.setItem("cachedCourseInfo",JSON.stringify(s.data)),localStorage.setItem("cachedSchedule",JSON.stringify(r.data)),n(r.data),e(s.data),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),a(!0);case 22:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e,n,a){return t.apply(this,arguments)}}(),P=Object(f.b)((function(t){return{UI:t.UI}}))((function(t){var e=t.UI.theme,n=function(){var t=Object(h.useState)(0)[1];return function(){return t((function(t){return t+1}))}}();Object(h.useEffect)((function(){return setTimeout((function(){return setInterval((function(){return n()}),5e3)}),1e3-Date.now()%1e3),function(){}}),[]);var a=Object(h.useState)(null),o=Object(c.a)(a,2),i=o[0],r=o[1],d=Object(h.useState)(null),u=Object(c.a)(d,2),l=u[0],f=u[1],p=Object(h.useState)(!1),b=Object(c.a)(p,2),j=b[0],v=b[1],g=Object(h.useState)(!1),O=Object(c.a)(g,2),S=O[0],y=O[1];if(!l||!i)return j?S?Object(W.jsxs)("div",{children:[Object(W.jsx)(s.a,{children:"Seems like you dont have a school account linked! Please link your schoology account to get access to this feature!"}),Object(W.jsx)(w.a,{variant:"contained",onClick:function(t){Object(M.b)()},children:"Link Schoology Account"})]}):Object(W.jsxs)("div",{children:[Object(W.jsx)(s.a,{children:"Fetching Schedule Data/ Zoom Links..."}),Object(W.jsx)(E.a,{})]}):(v(!0),A(r,f,y),null);if(!(null===l||void 0===l?void 0:l.schedule))return Object(W.jsx)("div",{children:Object(W.jsx)(s.a,{children:"Seems like you dont have a schedule setup! Please go over to the schedules catalog and set a schedule!"})});var k=function(t,e,n){var a=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"][x()(Date.now()).isoWeekday()-1],o=t.classes,i=new Map,r=JSON.parse(t.schedule.nameOverrides),c=x()().tz(JSON.parse(t.schedule.schedule).timePeriod).utcOffset(),s=x()().utcOffset();e.forEach((function(t){i.set(t.course.id,t)}));var d=JSON.parse(t.schedule.schedule)[a],u=function(t,e){for(var n=[],a=0;a<t;a++)n.push([0+a/t*360,0,e?30:70]);return n}(d.length,n);return d.map((function(t,e){var n=i.has(o[t.period]&&o[t.period].value)?i.get(o[t.period]&&o[t.period].value):null;return{period:r[t.period]||t.period,color:u[e],name:n&&n.course?n.course.course_title:"No Class",zoom:n&&n.links?n.links.map((function(t){return t.links.map((function(e){return{link:e,title:z(t.title)}}))})).flat(1e4):[],timeStart:1e3*x()(t.timeStart,"hh:mma").add((c-s)/60,"hours").unix(),timeEnd:1e3*x()(t.timeEnd,"hh:mma").add((c-s)/60,"hours").unix(),tSS:t.timeStart,tES:t.timeEnd,duration:t.timeEnd-t.timeStart}}))}(l,i,e);return Object(W.jsx)(N.a,{style:{marginBottom:"50px",width:"100%",padding:"0px"},children:m.a.Children.toArray(k.map((function(t){return Object(W.jsx)(J,{theme:e,period:t.period,name:t.name,zoom:t.zoom,color:t.color,timeStart:t.timeStart,timeEnd:t.timeEnd,tSS:t.tSS,tES:t.tES,duration:t.timeEnd-t.timeStart})})))})})),T=n(1329),B=function(t){var e=Object(h.useState)(new Date),n=Object(c.a)(e,2);n[0],n[1];return Object(W.jsxs)("div",{style:{verticalAlign:"middle",width:"100%",minWidth:"100%"},children:[Object(W.jsx)(s.a,{variant:"h5",style:{fontSize:"5.5vw",textAlign:"left"},children:l()().format("h:mm:ss\xa0A")}),Object(W.jsx)(s.a,{variant:"h5",style:{fontSize:"2.5vw",textAlign:"left"},children:l()().format("M/D/YYYY dddd")})]})},Y=function(t){var e=Object(h.useState)(new Date),n=Object(c.a)(e,2);n[0],n[1];return Object(W.jsxs)("div",{style:{verticalAlign:"middle",width:"100%",minWidth:"100%"},children:[Object(W.jsx)(s.a,{variant:"h5",style:{fontSize:"10vw"},children:l()().format("h:mm:ss\xa0A")}),Object(W.jsx)(s.a,{variant:"h5",style:{fontSize:"5.65vw"},children:l()().format("M/D/YYYY dddd")})]})},L=0,H=function(t){Object(i.a)(n,t);var e=Object(r.a)(n);function n(t){var o;return Object(a.a)(this,n),o=e.call(this,t),setTimeout((function(){return setInterval((function(){return o.forceUpdate()}),1e3)}),1e3-Date.now()%1e3),o}return Object(o.a)(n,[{key:"getTimePhrase",value:function(){try{if(!localStorage.getItem("cachedSchedule"))return"";var t=JSON.parse(localStorage.getItem("cachedSchedule")),e=JSON.parse(t.schedule.schedule),n=JSON.parse(localStorage.getItem("user")),a=(t.classes,l()().tz(e.timePeriod).utcOffset()),o=l()().utcOffset(),i=(l()(),function(e){return JSON.parse(t.schedule.nameOverrides)[e]||"Break"}),r=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"][l()().isoWeekday()-1],c=e[r]&&e[r].map((function(t){return{period:t.period,timeStart:1e3*l()(t.timeStart,"hh:mma").add((a-o)/60,"hours").unix(),timeEnd:1e3*l()(t.timeEnd,"hh:mma").add((a-o)/60,"hours").unix()}})),s=c.filter((function(t){return t.timeStart<Date.now()&&Date.now()<t.timeEnd}))[0];if(s){var d="".concat(s.timeEnd-Date.now()>6e4?s.timeEnd-Date.now()>36e5?"".concat(Math.round(l.a.duration(s.timeEnd-Date.now()).asHours())," hours"):"".concat(Math.round(l.a.duration(s.timeEnd-Date.now()).asMinutes())," minutes"):"".concat(Math.round(l.a.duration(s.timeEnd-Date.now()).asSeconds())," seconds"));return s.timeEnd-Date.now()<12e4&&Date.now()-L>24e4&&(L=Date.now(),T.a.pushNotification(void 0,void 0,"".concat(i(s.period)," is ending soon!"),"Hey ".concat(n.firstName,", ").concat(i(s.period)," is about to end in ").concat(d,"!"))),"".concat(i(s.period)," ends in ").concat(d)}var u=c.filter((function(t){return t.timeStart>Date.now()}))[0];if(u){var h="".concat(u.timeStart-Date.now()>6e4?u.timeStart-Date.now()>36e5?"".concat(Math.round(l.a.duration(u.timeStart-Date.now()).asHours())," hours"):"".concat(Math.round(l.a.duration(u.timeStart-Date.now()).asMinutes())," minutes"):"".concat(Math.round(l.a.duration(u.timeStart-Date.now()).asSeconds())," seconds"));return u.timeStart-Date.now()<12e4&&Date.now()-L>24e4&&(L=Date.now(),T.a.pushNotification(void 0,void 0,"".concat(i(u.period)," is starting soon!"),"Hey ".concat(n.firstName,", ").concat(i(u.period)," is about to start in ").concat(h,"!"))),"".concat(i(u.period)," starts in ").concat(h)}var m=c.filter((function(t){return Date.now()>t.timeEnd})).pop();if(m){var f="".concat(Date.now()-m.timeEnd>6e4?Date.now()-m.timeEnd>6e4?"".concat(Math.round(l.a.duration(Date.now()-m.timeEnd).asHours())," hours"):"".concat(Math.round(l.a.duration(Date.now()-m.timeEnd).asMinutes())," minutes"):"".concat(Math.round(l.a.duration(Date.now()-m.timeEnd).asSeconds())," seconds"));return"".concat(i(m.period)," ended ").concat(f," ago")}return"No classes today! Take a break, you deserve it :)"}catch(p){return""}}},{key:"render",value:function(){return window.innerWidth<=1e3?Object(W.jsxs)("div",{style:{marginTop:"5%"},children:[Object(W.jsxs)(d.a,{style:{display:"block",verticalAlign:"top",width:"90%",margin:"5%"},children:[Object(W.jsx)(Y,{}),Object(W.jsx)(s.a,{variant:"h5",style:{fontSize:28},children:this.getTimePhrase()})]}),Object(W.jsx)(d.a,{style:{overflowY:"scroll",padding:"2%",paddingBottom:"0%",margin:"5%",width:"90%",borderRadius:5,borderWidth:0,background:"rgba(0,0,0,0)"},children:Object(W.jsx)(P,{})})]}):Object(W.jsxs)("div",{style:{marginTop:"5%"},children:[Object(W.jsx)(d.a,{style:{overflowY:"scroll",padding:"2%",paddingBottom:"0%",width:"60%",maxWidth:"60%",display:"inline-block",background:"rgba(0,0,0,0)",borderRadius:10,borderWidth:0},children:Object(W.jsx)(P,{})}),Object(W.jsx)(d.a,{style:{display:"inline-block",verticalAlign:"top",width:"30vw",height:"30vw",marginLeft:"2vw",padding:"2%",position:"relative",background:"rgba(0,0,0,0)",borderRadius:"1.25vw!important"}}),Object(W.jsx)(d.a,{style:{borderRadius:"1.25vw!important",display:"inline-block",verticalAlign:"top",width:"30vw",height:"30vw",marginLeft:"2vw",padding:"2%",position:"fixed",right:"5%",top:"19.5vh"},children:Object(W.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},children:[Object(W.jsx)(B,{}),Object(W.jsx)(s.a,{variant:"h5",align:"left",style:{fontSize:"2vw"},children:this.getTimePhrase()})]})})]})}}]),n}(h.Component);e.default=Object(f.b)()(Object(I.c)(H))}}]);
//# sourceMappingURL=9.5046ad01.chunk.js.map