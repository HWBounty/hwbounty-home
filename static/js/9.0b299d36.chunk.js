(this["webpackJsonphwbounty-home"]=this["webpackJsonphwbounty-home"]||[]).push([[9],{1329:function(t,e,a){"use strict";var n=a(49),r=a(50),i=function(){function t(){Object(n.a)(this,t),"granted"!==Notification.permission&&Notification.requestPermission()}return Object(r.a)(t,null,[{key:"pushNotification",value:function(t,e,a,n){try{return"granted"!==Notification.permission&&Notification.requestPermission(),new Notification(a||"HWBounty Notification",{body:n||"",icon:t,image:e})}catch(r){}}}]),t}();e.a=i},1375:function(t,e,a){"use strict";var n=a(3),r=a(9),i=a(0),o=(a(13),a(10)),c=a(11),s=a(24),d=44,l=i.forwardRef((function(t,e){var a=t.classes,c=t.className,l=t.color,u=void 0===l?"primary":l,h=t.disableShrink,m=void 0!==h&&h,f=t.size,p=void 0===f?40:f,b=t.style,v=t.thickness,j=void 0===v?3.6:v,g=t.value,w=void 0===g?0:g,O=t.variant,y=void 0===O?"indeterminate":O,S=Object(r.a)(t,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),x={},k={},D={};if("determinate"===y||"static"===y){var E=2*Math.PI*((d-j)/2);x.strokeDasharray=E.toFixed(3),D["aria-valuenow"]=Math.round(w),x.strokeDashoffset="".concat(((100-w)/100*E).toFixed(3),"px"),k.transform="rotate(-90deg)"}return i.createElement("div",Object(n.a)({className:Object(o.a)(a.root,c,"inherit"!==u&&a["color".concat(Object(s.a)(u))],{determinate:a.determinate,indeterminate:a.indeterminate,static:a.static}[y]),style:Object(n.a)({width:p,height:p},k,b),ref:e,role:"progressbar"},D,S),i.createElement("svg",{className:a.svg,viewBox:"".concat(22," ").concat(22," ").concat(d," ").concat(d)},i.createElement("circle",{className:Object(o.a)(a.circle,m&&a.circleDisableShrink,{determinate:a.circleDeterminate,indeterminate:a.circleIndeterminate,static:a.circleStatic}[y]),style:x,cx:d,cy:d,r:(d-j)/2,fill:"none",strokeWidth:j})))}));e.a=Object(c.a)((function(t){return{root:{display:"inline-block"},static:{transition:t.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:t.transitions.create("transform")},colorPrimary:{color:t.palette.primary.main},colorSecondary:{color:t.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:t.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:t.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(l)},1506:function(t,e,a){"use strict";a.r(e);var n=a(49),r=a(50),i=a(88),o=a(87),c=a(41),s=a(197),d=a(1338),l=a(1315),u=a.n(l),h=a(0),m=a.n(h),f=a(53),p=a(45),b=a.n(p),v=a(67),j=a(178),g=a(1277),w=a(1271),O=a(300),y=a.n(O),S=a(1339),x=a.n(S),k=a(59),D=a.n(k),E=a(1375),N=a(1278),I=a(193),M=a(144),z=a(7),W=function(t){var e={gt:">"};return t.replace(/&(#(?:x[0-9a-f]+|\d+)|[a-z]+);?/gi,(function(t,a){return"#"===a[0]?String.fromCharCode("x"===a[1].toLowerCase()?parseInt(a.substr(2),16):parseInt(a.substr(1),10)):e.hasOwnProperty(a)?e[a]:t}))},C=y()({root:{border:0,borderRadius:"1.25vw!important",marginTop:"2vw",paddingBottom:10,display:"block",cursor:"pointer",position:"relative",boxShadow:"5px 5px 10px 1px rgba(0,0,0,0.6)!important"}}),P=function(t){var e,a=C(),n=t.theme,r=t.period,i=t.name,o=t.zoom,l=t.color,u=t.timeStart,h=t.timeEnd,f=t.tSS,p=t.tES,b=t.duration,v=Object(I.b)().enqueueSnackbar,O=0;O=Date.now()-h>0?100:Date.now()-u>0&&h-Date.now()>0?100*(Date.now()-u)/(h-u):0;var y=m.a.useState(!1),S=Object(c.a)(y,2),x=S[0],k=S[1],D=l.filter((function(t){return!0}));return D[2]=n?30:90,l[2]=n?20:75,Object(z.jsx)("div",{style:{marginBottom:"2vh"},children:Object(z.jsxs)(d.a,{className:a.root,onClick:function(){o.length?k(!x):v("No Zoom Links found for this class!")},style:{background:"linear-gradient(90deg, hsl(".concat(l[0],",").concat(l[1],"%,").concat(l[2],"%) 0%, hsl(").concat(l[0],",").concat(l[1],"%,").concat(l[2],"%) ").concat(O,"%, hsl(").concat(D[0],",").concat(D[1],"%,").concat(D[2],"%) ").concat(O+1e-6,"%, hsl(").concat(D[0],",").concat(D[1],"%,").concat(D[2],"%) 100%)"),borderRadius:20,padding:"10px"},children:[Object(z.jsx)(s.a,{variant:"h5",align:"left",style:{marginLeft:"4%",fontSize:Math.pow(window.innerWidth,.4)+32,marginBottom:window.innerWidth<=1300?"12%":"6%",position:"relative",marginTop:window.innerWidth<=1300?"4%":"2%"},children:i}),x?null:Object(z.jsxs)(s.a,{align:"left",variant:"h5",style:(e={fontSize:window.innerWidth<=1300?Math.pow(window.innerWidth,.3)+10:Math.pow(window.innerWidth,.4)+10,margin:10,marginBottom:10,marginTop:0,bottom:window.innerWidth<=1300?"70%":"1%",left:"4%"},Object(j.a)(e,"bottom","10%"),Object(j.a)(e,"position","absolute"),Object(j.a)(e,"fontFamily","'Nunito'"),e),children:[r,"\xa0\xa0\xa0",f,"-",p," (",Math.round(b/6e4)," mins)"]}),Object(z.jsx)(w.a,{in:x,children:m.a.Children.toArray(o.map((function(t){return Object(z.jsx)(g.a,{onClick:function(e){return function(t,e){t.stopPropagation();var a=window.open(e,"_blank","noopener,noreferrer");a&&(a.opener=null)}(e,t.link)},children:t.title})})))})]})})},J=function(){var t=Object(v.a)(b.a.mark((function t(e,a,n){var r,i,o,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,localStorage.getItem("DBIdToken")){t.next=3;break}throw new Error("something bad happened?");case 3:return localStorage.getItem("cachedSchedule")&&a(JSON.parse(localStorage.getItem("cachedSchedule"))),localStorage.getItem("cachedCourseInfo")&&e(JSON.parse(localStorage.getItem("cachedCourseInfo"))),t.next=7,Promise.all([D.a.get("https://api.hwbounty.help/schedule/@me").catch(console.trace),D.a.get("https://api.hwbounty.help/sgy/getZoomLinks").catch(console.trace)]);case 7:if(r=t.sent,i=Object(c.a)(r,2),o=i[0],s=i[1],(null===o||void 0===o?void 0:o.data)&&(null===s||void 0===s?void 0:s.data)&&500!==(null===o||void 0===o?void 0:o.status)){t.next=13;break}throw new Error("something bad happened?");case 13:localStorage.setItem("cachedCourseInfo",JSON.stringify(s.data)),localStorage.setItem("cachedSchedule",JSON.stringify(o.data)),a(o.data),e(s.data),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),n(!0);case 22:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e,a,n){return t.apply(this,arguments)}}(),T=Object(f.b)((function(t){return{UI:t.UI}}))((function(t){var e=t.UI.theme,a=function(){var t=Object(h.useState)(0)[1];return function(){return t((function(t){return t+1}))}}();Object(h.useEffect)((function(){var t=setTimeout((function(){return setInterval((function(){return a()}),5e3)}),1e3-Date.now()%1e3);return function(){return clearTimeout(t)}}),[]);var n=Object(h.useState)(null),r=Object(c.a)(n,2),i=r[0],o=r[1],d=Object(h.useState)(null),l=Object(c.a)(d,2),u=l[0],f=l[1],p=Object(h.useState)(!1),b=Object(c.a)(p,2),v=b[0],j=b[1],w=Object(h.useState)(!1),O=Object(c.a)(w,2),y=O[0],S=O[1];if(!u||!i)return v?y?Object(z.jsxs)("div",{children:[Object(z.jsx)(s.a,{children:"Seems like you dont have a school account linked! Please link your schoology account to get access to this feature!"}),Object(z.jsx)(g.a,{variant:"contained",onClick:function(t){Object(M.b)()},children:"Link Schoology Account"})]}):Object(z.jsxs)("div",{children:[Object(z.jsx)(s.a,{children:"Fetching Schedule Data/ Zoom Links..."}),Object(z.jsx)(E.a,{})]}):(j(!0),J(o,f,S),null);if(!(null===u||void 0===u?void 0:u.schedule))return Object(z.jsx)("div",{children:Object(z.jsx)(s.a,{children:"Seems like you dont have a schedule setup! Please go over to the schedules catalog and set a schedule!"})});var k=function(t,e,a){var n=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"][x()(Date.now()).isoWeekday()-1],r=t.classes,i=new Map,o=JSON.parse(t.schedule.nameOverrides),c=x()().tz(JSON.parse(t.schedule.schedule).timePeriod).utcOffset(),s=x()().utcOffset();e.forEach((function(t){i.set(t.course.id,t)}));var d=JSON.parse(t.schedule.schedule)[n],l=function(t,e){for(var a=[],n=0;n<t;n++)a.push([0+n/t*360,0,e?30:70]);return a}(d.length,a);return d.map((function(t,e){var a=i.has(r[t.period]&&r[t.period].value)?i.get(r[t.period]&&r[t.period].value):null;return{period:o[t.period]||t.period,color:l[e],name:a&&a.course?a.course.course_title:"No Class",zoom:a&&a.links?a.links.map((function(t){return t.links.map((function(e){return{link:e,title:W(t.title)}}))})).flat(1e4):[],timeStart:1e3*x()(t.timeStart,"hh:mma").add((c-s)/60,"hours").unix(),timeEnd:1e3*x()(t.timeEnd,"hh:mma").add((c-s)/60,"hours").unix(),tSS:t.timeStart,tES:t.timeEnd,duration:t.timeEnd-t.timeStart}}))}(u,i,e);return Object(z.jsx)(N.a,{style:{marginBottom:"50px",width:"100%",padding:"0px"},children:m.a.Children.toArray(k.map((function(t){return Object(z.jsx)(P,{theme:e,period:t.period,name:t.name,zoom:t.zoom,color:t.color,timeStart:t.timeStart,timeEnd:t.timeEnd,tSS:t.tSS,tES:t.tES,duration:t.timeEnd-t.timeStart})})))})})),A=a(1329),B=function(t){var e=Object(h.useState)(new Date),a=Object(c.a)(e,2);a[0],a[1];return Object(z.jsxs)("div",{style:{verticalAlign:"middle",width:"100%",minWidth:"100%"},children:[Object(z.jsx)(s.a,{variant:"h5",style:{fontSize:"5.5vw",textAlign:"left"},children:u()().format("h:mm:ss\xa0A")}),Object(z.jsx)(s.a,{variant:"h5",style:{fontSize:"2.5vw",textAlign:"left"},children:u()().format("M/D/YYYY dddd")})]})},Y=function(t){var e=Object(h.useState)(new Date),a=Object(c.a)(e,2);a[0],a[1];return Object(z.jsxs)("div",{style:{verticalAlign:"middle",width:"100%",minWidth:"100%"},children:[Object(z.jsx)(s.a,{variant:"h5",style:{fontSize:"10vw"},children:u()().format("h:mm:ss\xa0A")}),Object(z.jsx)(s.a,{variant:"h5",style:{fontSize:"5.65vw"},children:u()().format("M/D/YYYY dddd")})]})},L=0,R=function(t){Object(i.a)(a,t);var e=Object(o.a)(a);function a(t){var r;return Object(n.a)(this,a),r=e.call(this,t),setTimeout((function(){return setInterval((function(){return r.forceUpdate()}),1e3)}),1e3-Date.now()%1e3),r}return Object(r.a)(a,[{key:"getTimePhrase",value:function(){try{if(!localStorage.getItem("cachedSchedule"))return"";var t=JSON.parse(localStorage.getItem("cachedSchedule")),e=JSON.parse(t.schedule.schedule),a=JSON.parse(localStorage.getItem("user")),n=(t.classes,u()().tz(e.timePeriod).utcOffset()),r=u()().utcOffset(),i=(u()(),function(e){return JSON.parse(t.schedule.nameOverrides)[e]||"Break"}),o=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"][u()().isoWeekday()-1],c=e[o]&&e[o].map((function(t){return{period:t.period,timeStart:1e3*u()(t.timeStart,"hh:mma").add((n-r)/60,"hours").unix(),timeEnd:1e3*u()(t.timeEnd,"hh:mma").add((n-r)/60,"hours").unix()}})),s=c.filter((function(t){return t.timeStart<Date.now()&&Date.now()<t.timeEnd}))[0];if(s){var d="".concat(s.timeEnd-Date.now()>6e4?s.timeEnd-Date.now()>36e5?"".concat(Math.round(u.a.duration(s.timeEnd-Date.now()).asHours())," hours"):"".concat(Math.round(u.a.duration(s.timeEnd-Date.now()).asMinutes())," minutes"):"".concat(Math.round(u.a.duration(s.timeEnd-Date.now()).asSeconds())," seconds"));return s.timeEnd-Date.now()<12e4&&Date.now()-L>24e4&&(L=Date.now(),A.a.pushNotification(void 0,void 0,"".concat(i(s.period)," is ending soon!"),"Hey ".concat(a.firstName,", ").concat(i(s.period)," is about to end in ").concat(d,"!"))),"".concat(i(s.period)," ends in ").concat(d)}var l=c.filter((function(t){return t.timeStart>Date.now()}))[0];if(l){var h="".concat(l.timeStart-Date.now()>6e4?l.timeStart-Date.now()>36e5?"".concat(Math.round(u.a.duration(l.timeStart-Date.now()).asHours())," hours"):"".concat(Math.round(u.a.duration(l.timeStart-Date.now()).asMinutes())," minutes"):"".concat(Math.round(u.a.duration(l.timeStart-Date.now()).asSeconds())," seconds"));return l.timeStart-Date.now()<12e4&&Date.now()-L>24e4&&(L=Date.now(),A.a.pushNotification(void 0,void 0,"".concat(i(l.period)," is starting soon!"),"Hey ".concat(a.firstName,", ").concat(i(l.period)," is about to start in ").concat(h,"!"))),"".concat(i(l.period)," starts in ").concat(h)}var m=c.filter((function(t){return Date.now()>t.timeEnd})).pop();if(m){var f="".concat(Date.now()-m.timeEnd>6e4?Date.now()-m.timeEnd>6e4?"".concat(Math.round(u.a.duration(Date.now()-m.timeEnd).asHours())," hours"):"".concat(Math.round(u.a.duration(Date.now()-m.timeEnd).asMinutes())," minutes"):"".concat(Math.round(u.a.duration(Date.now()-m.timeEnd).asSeconds())," seconds"));return"".concat(i(m.period)," ended ").concat(f," ago")}return"No classes today! Take a break, you deserve it :)"}catch(p){return""}}},{key:"render",value:function(){return window.innerWidth<=1e3?Object(z.jsxs)("div",{style:{marginTop:"5%"},children:[Object(z.jsxs)(d.a,{style:{display:"block",verticalAlign:"top",width:"90%",margin:"5%"},children:[Object(z.jsx)(Y,{}),Object(z.jsx)(s.a,{variant:"h5",style:{fontSize:28},children:this.getTimePhrase()})]}),Object(z.jsx)(d.a,{style:{overflowY:"scroll",padding:"2%",paddingBottom:"0%",margin:"5%",width:"90%",borderRadius:5,borderWidth:0,background:"rgba(0,0,0,0)"},children:Object(z.jsx)(T,{})})]}):Object(z.jsxs)("div",{style:{marginTop:"5%"},children:[Object(z.jsx)(d.a,{style:{overflowY:"scroll",padding:"2%",paddingBottom:"0%",width:"60%",maxWidth:"60%",display:"inline-block",background:"rgba(0,0,0,0)",borderRadius:10,borderWidth:0},children:Object(z.jsx)(T,{})}),Object(z.jsx)(d.a,{style:{display:"inline-block",verticalAlign:"top",width:"30vw",height:"30vw",marginLeft:"2vw",padding:"2%",position:"relative",background:"rgba(0,0,0,0)",borderRadius:"1.25vw!important"}}),Object(z.jsx)(d.a,{style:{borderRadius:"1.25vw!important",display:"inline-block",verticalAlign:"top",width:"30vw",height:"30vw",marginLeft:"2vw",padding:"2%",position:"fixed",right:"5%",top:"19.5vh"},children:Object(z.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},children:[Object(z.jsx)(B,{}),Object(z.jsx)(s.a,{variant:"h5",align:"left",style:{fontSize:"2vw"},children:this.getTimePhrase()})]})})]})}}]),a}(h.Component);e.default=Object(f.b)()(Object(I.c)(R))}}]);
//# sourceMappingURL=9.0b299d36.chunk.js.map