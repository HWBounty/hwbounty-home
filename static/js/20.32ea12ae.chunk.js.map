{"version":3,"sources":["redux/actions/moduleActions.js","components/Modules/Calculator/History.js","util/latex/preprocessMathQuill.js","components/Modules/Calculator/CalcTools.js","components/Modules/Calculator/Calculator.js","components/Modules/Calculator/VariableField.js","components/Modules/Calculator/CalcVariables.js","components/Modules/Calculator/CalculatorModule.js","components/Modules/Calculator/MathScope.js","pages/modules.js"],"names":["calc_setInput","latex","dispatch","type","CALC_SET_INPUT","payload","calc_addVariable","variable","CALC_ADD_VARIABLE","calc_removeVariable","CALC_REMOVE_VARIABLE","useStyles","makeStyles","theme","root","flex","overflow","connect","state","module","props","history","calculator","classes","HistoryButton","ans","ListItem","button","onClick","style","cursor","Typography","className","length","List","React","Children","toArray","map","x","Divider","mathquillToMathJS","fromMQ","noBraceSub","convertSubscript","fracToDivision","tex","mathjs","reduce","acc","r","str","find","replaceWith","replace","RegExp","escapeRegExp","expr","subStart","indexOf","numStart","closingBrace","slice","frac","fracStart","divIdx","startIdx","braces","openingBrace","undefined","Error","stack","j","findClosingBrace","numPadRoot","symbolPadRoot","SymbolButton","symbol","Button","variant","NumPad","UI","NumRow","arr","Grid","container","item","spacing","wrap","num","disabled","direction","SymbolPad","obj","addStyles","spreadIt","paper","height","rootPadding","flexDirection","display","symbolPadGrid","paddingTop","LatexInput","onChange","onSubmit","mathquillDidMount","fontSize","config","autoCommands","autoOperatorNames","handlers","enter","calc_addHistory","CALC_PUSH_HISTORY","input","scope","useState","answer","setAnswer","error","setError","mathField","useRef","Paper","InputBase","inputComponent","inputProps","val","math","compile","evaluate","precision","current","err","console","log","value","fullWidth","xs","write","focus","cmd","color","startName","startVal","updateList","nameDisabled","setNameDisabled","name","setName","nameInputRef","valueDisabled","setValueDisabled","setValue","valueInputRef","useEffect","select","handleSubmitName","event","preventDefault","handleSubmitValue","parsedValue","parseInt","set","TextField","size","paddingLeft","inputRef","target","onBlur","textAlign","paddingRight","placeholder","delete","withStyles","variableWrapper","deleteButton","width","addButton","variables","useless","badCode","forceUpdate","onDragEnd","result","destination","localScope","Array","from","entries","key","Toolbar","disableGutters","Tooltip","title","placement","letters","split","tmp","filter","c","has","varName","deleteAll","this","Map","get","probUseless","toJSON","keys","prev","index","reinsert","clear","localStorage","removeItem","start","end","splice","removed","i","getItem","JSON","parse","setItem","stringify","fromJSON","calc_setParser","parser","CALC_SET_PARSER","margin","marginLeft","marginRight","marginTop","minHeight"],"mappings":"gNAiBaA,EAAgB,SAACC,GAAD,OAAW,SAACC,GACvCA,EAAS,CAAEC,KAAMC,IAAgBC,QAASJ,MAE/BK,EAAmB,SAACC,GAAD,OAAc,SAACL,GAC7CA,EAAS,CAAEC,KAAMK,IAAmBH,QAASE,MAElCE,EAAsB,SAACF,GAAD,OAAc,SAACL,GAChDA,EAAS,CAAEC,KAAMO,IAAsBL,QAASE,M,yFCP5CI,EAAYC,KAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJC,KAAM,EACNC,SAAU,YAqDCC,eAJS,SAACC,GAAD,MAAY,CAClCC,OAAQD,EAAMC,UAGwB,CAAEnB,iBAA3BiB,EAjDQ,SAACG,GAAW,IAGfC,EAGdD,EAJFD,OACEG,WAAcD,QAEhBrB,EACEoB,EADFpB,cAGIuB,EAAUZ,IAEVa,EAAgB,SAACJ,GAAW,IACxBnB,EAAemB,EAAfnB,MAAOwB,EAAQL,EAARK,IACf,OACE,eAACC,EAAA,EAAD,CAAUC,QAAM,EAACC,QAAS,kBAAM5B,EAAcC,IAA9C,UACE,cAAC,kBAAD,CAAiB4B,MAAO,CAAEd,KAAM,EAAGe,OAAQ,WAA3C,SACG7B,IAEH,eAAC8B,EAAA,EAAD,gBAAeN,SAKrB,OACE,qBAAKO,UAAWT,EAAQT,KAAxB,SACsB,IAAnBO,EAAQY,OACP,cAACC,EAAA,EAAD,UACGC,IAAMC,SAASC,QACdhB,EAAQiB,KAAI,SAACC,GAAD,OACV,qCACE,cAACC,EAAA,EAAD,IACA,cAAChB,EAAD,CAAevB,MAAOsC,EAAEtC,MAAOwB,IAAKc,EAAEd,eAM9C,qEAEE,uBAFF,iDC7CO,SAASgB,EAAkBC,GACxC,IAyBMC,EAAaC,EADJC,EAAeH,IAE9B,MA1BqB,CACnB,CAAEI,IAAK,uBAAwBC,OAAQ,QACvC,CAAED,IAAK,wBAAyBC,OAAQ,SACxC,CAAED,IAAK,uBAAwBC,OAAQ,QACvC,CAAED,IAAK,sBAAuBC,OAAQ,OACtC,CAAED,IAAK,uBAAwBC,OAAQ,QACvC,CAAED,IAAK,sBAAuBC,OAAQ,OACtC,CAAED,IAAK,sBAAuBC,OAAQ,OACtC,CAAED,IAAK,wBAAyBC,OAAQ,SACxC,CAAED,IAAK,wBAAyBC,OAAQ,SACxC,CAAED,IAAK,wBAAyBC,OAAQ,SACxC,CAAED,IAAK,0BAA2BC,OAAQ,WAC1C,CAAED,IAAK,0BAA2BC,OAAQ,WAC1C,CAAED,IAAK,0BAA2BC,OAAQ,WAC1C,CAAED,IAAK,SAAUC,OAAQ,OACzB,CAAED,IAAK,SAAUC,OAAQ,IACzB,CAAED,IAAK,UAAWC,OAAQ,IAC1B,CAAED,IAAK,IAAKC,OAAQ,KACpB,CAAED,IAAK,IAAKC,OAAQ,KACpB,CAAED,IAAK,IAAKC,OAAQ,KACpB,CAAED,IAAK,KAAMC,OAAQ,MAMHC,QAClB,SAACC,EAAKC,GAAN,OA8DuBC,EA9DAF,EA8DKG,EA9DAF,EAAC,IA8DKG,EA9DIH,EAAC,OAgElCC,EAAIG,QAAQ,IAAIC,OARlB,SAAsBJ,GAG3B,OAAOA,EAAIG,QAAQ,sBAAuB,QAKZE,CAAaJ,GAAO,KAAMC,GAFnD,IAAoBF,EAAKC,EAAMC,IA7DlCV,GAQG,SAASC,EAAiBa,GAC/B,IACMC,EAAWD,EAAKE,QADV,MAGZ,GAAID,EAAW,EACb,OAAOD,EAGT,IAAMG,EAAWF,EAPL,KAOoBzB,OAC1B4B,EAAeJ,EAAKE,QAAQ,IAAKC,GAOvC,OAAOhB,EALLa,EAAKK,MAAM,EAAGJ,GACd,IACAD,EAAKK,MAAMF,EAAUC,GACrBJ,EAAKK,MAAMD,EAAe,IASvB,SAAShB,EAAeY,GAC7B,IAAMM,EAAO,SACPC,EAAYP,EAAKE,QAAQI,GACzBH,EAAWI,EAAYD,EAAK9B,OAElC,GAAI+B,EAAY,EACd,OAAOP,EAGT,IAAMQ,EA0BD,SAA0Bd,EAAKe,GACpC,IAAMC,EAAS,CACb,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KAGDC,EAAejB,EAAIe,GAEnBL,EAAeM,EAAOC,GAE5B,QAAqBC,IAAjBR,EACF,MAAMS,MAAM,GAAD,OACNnB,EADM,0DAC+Ce,EAD/C,MAQb,IAHA,IAAIK,EAAQ,EAGHC,EAAIN,EAAW,EAAGM,EAAIrB,EAAIlB,OAAQuC,IAMzC,GALIrB,EAAIqB,KAAOJ,EACbG,GAAS,EACApB,EAAIqB,KAAOX,IACpBU,IAAU,GAEE,IAAVA,EACF,OAAOC,EAKX,MAAMF,MAAM,GAAD,OACNnB,EADM,+CACoCe,EADpC,yBA3DIO,CAAiBhB,EAAMG,GAQtC,OAAOf,EALLY,EAAKK,MAAM,EAAGE,GACdP,EAAKK,MAAMF,EAAUK,EAAS,GAC9B,IACAR,EAAKK,MAAMG,EAAS,I,aChFlBtD,EAAYC,IAAW,CAC3B8D,WAAY,GACZC,cAAe,GACfhD,OAAQ,KAOJiD,EAAe,SAACxD,GAAW,IACvBQ,EAA2BR,EAA3BQ,QAAS3B,EAAkBmB,EAAlBnB,MAAO4E,EAAWzD,EAAXyD,OAClBtD,EAAUZ,EAAUS,GAC1B,OACE,cAAC0D,EAAA,EAAD,CACE9C,UAAWT,EAAQI,OACnBoD,QAAQ,YACRnD,QAAS,kBAAMA,EAAQ3B,IAHzB,SAKG4E,KAOMG,EAAS/D,aAHE,SAACC,GAAD,MAAY,CAClC+D,GAAI/D,EAAM+D,MAEUhE,EAAyB,SAACG,GAC9C,IAAMG,EAAUZ,EAAUS,GAExBQ,EAEER,EAFFQ,QAIIsD,GAFF9D,EADF6D,GAAMpE,MAGO,SAAC,GAAa,IAAXsE,EAAU,EAAVA,IAChB,OACE,cAACC,EAAA,EAAD,CAAMC,WAAS,EAACC,MAAI,EAACC,QAAS,EAAGC,KAAK,SAAtC,SACGrD,IAAMC,SAASC,QACd8C,EAAI7C,KAAI,SAACmD,GAAD,OACN,cAACL,EAAA,EAAD,CAAME,MAAI,EAAV,SACW,OAARG,EACC,cAAC,EAAD,CAAc7D,QAASA,EAAS3B,MAAOwF,EAAKZ,OAAQY,IAEpD,cAACX,EAAA,EAAD,CACE9C,UAAWT,EAAQI,OACnBoD,QAAQ,YACRW,UAAQ,cASxB,OACE,eAACN,EAAA,EAAD,CAAMC,WAAS,EAACE,QAAS,EAAGC,KAAK,SAASG,UAAU,SAApD,UACE,cAACT,EAAD,CAAQC,IAAK,CAAC,EAAG,EAAG,KACpB,cAACD,EAAD,CAAQC,IAAK,CAAC,EAAG,EAAG,KACpB,cAACD,EAAD,CAAQC,IAAK,CAAC,EAAG,EAAG,KACpB,cAACD,EAAD,CAAQC,IAAK,CAAC,KAAM,EAAG,aAKhBS,EAAY,SAACxE,GAAW,IAC3BQ,EAAYR,EAAZQ,QAUR,OACE,8BACE,cAACwD,EAAA,EAAD,CAAMC,WAAS,EAACE,QAAS,EAAzB,SACE,cAACH,EAAA,EAAD,CAAMC,WAAS,EAACC,MAAI,EAACC,QAAS,EAA9B,SACGpD,IAAMC,SAASC,QAbR,CACd,CAAEwC,OAAQ,IAAK5E,MAAO,KACtB,CAAE4E,OAAQ,IAAK5E,MAAO,KACtB,CAAE4E,OAAQ,IAAK5E,MAAO,QACtB,CAAE4E,OAAQ,IAAK5E,MAAO,QACtB,CAAE4E,OAAQ,SAAK5E,MAAO,QACtB,CAAE4E,OAAQ,IAAK5E,MAAO,MAQNqC,KAAI,SAACuD,GACX,OACE,cAACT,EAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAAC,EAAD,CACE1D,QAASA,EACT3B,MAAO4F,EAAI5F,MACX4E,OAAQgB,EAAIhB,sB,iBCnEhCiB,sBAEA,IAAMnF,EAAYC,KAAW,SAACC,GAAD,mBAAC,eACzBA,EAAMkF,UADkB,IAE3BC,MAAM,2BACDnF,EAAMkF,SAASC,OADf,IAEHC,OAAQ,SAEVC,YAAY,2BACPrF,EAAMkF,SAASG,aADT,IAETC,cAAe,SACfC,QAAS,OACTH,OAAQ,SAEVI,cAAe,CACbC,WAAY,SAIVC,EAAa,SAACnF,GAAW,IACrBoF,EAA0CpF,EAA1CoF,SAAUC,EAAgCrF,EAAhCqF,SAAUC,EAAsBtF,EAAtBsF,kBAE5B,OACE,cAAC,oBAAD,CACEzG,MAAM,GACN4B,MAAO,CAAEoE,OAAQ,OAAQU,SAAU,GAAI5F,KAAM,GAC7C6F,OAAQ,CACNC,aAAc,oBACdC,kBACE,uFACFC,SAAU,CACRC,MAAOP,IAGXD,SAAUA,EACVE,kBAAmBA,KA2FVzF,eAJS,SAACC,GAAD,MAAY,CAClCC,OAAQD,EAAMC,UAGwB,CAAE8F,gBJ/IX,SAAChH,GAAD,OAAW,SAACC,GACzCA,EAAS,CAAEC,KAAM+G,IAAmB7G,QAASJ,MI8IYD,iBAA5CiB,EAtFW,SAACG,GAQrBA,EANFD,OACEG,WAAc6F,MAHkB,IAKlCF,EAGE7F,EAHF6F,gBAEAG,GACEhG,EAFFpB,cAEEoB,EADFgG,OAGI7F,EAAUZ,IAVmB,EAYP0G,mBAAS,IAZF,mBAY5BC,EAZ4B,KAYpBC,EAZoB,OAaTF,oBAAS,GAbA,mBAa5BG,EAb4B,KAarBC,EAbqB,KAe7BC,EAAYC,iBAAO,MAkCzB,OACE,cAACC,EAAA,EAAD,CAAO5F,UAAWT,EAAQyE,MAA1B,SACE,sBAAKhE,UAAWT,EAAQ2E,YAAxB,UACE,cAAC,EAAD,IACA,cAAC2B,EAAA,EAAD,CACEC,eAAgBvB,EAChBwB,WAAY,CACVtB,SAvCW,SAACuB,GACpB,IACE,IAEIvG,EAFSwG,IAAWxF,EAAkBuF,EAAI/H,UACxBiI,UACHC,SAASf,GAC5B3F,EAAMwG,KAAYxG,EAAK,CAAE2G,UAAW,KAEpCb,EAAU,GAAD,OAAI9F,IACbgG,GAAS,GACTR,EAAgB,CAAEhH,MAAO+H,EAAI/H,QAASwB,IAAI,GAAD,OAAKA,KAC9CiG,EAAUW,QAAQpI,MAAM,IACxB,MAAOqI,GACPC,QAAQC,IAAIF,GACZf,EAAU,aACVE,GAAS,KA2BHf,kBAvBmB,SAACsB,GAC5BN,EAAUW,QAAUL,IAyBdS,MAAM,GACNC,WAAS,IAEX,eAACtD,EAAA,EAAD,CAAMC,WAAS,EAACE,QAAS,EAAGvD,UAAWT,EAAQ8E,cAA/C,UACE,cAACjB,EAAA,EAAD,CAAME,MAAI,EAACqD,IAAE,EAAb,SACE,cAAC3D,EAAD,CAAQpD,QA3BU,SAAC6D,GAC3BiC,EAAUW,QAAQO,MAAMnD,GACxBiC,EAAUW,QAAQQ,aA2BZ,cAACzD,EAAA,EAAD,CAAME,MAAI,EAACqD,IAAE,EAAb,SACE,cAAC,EAAD,CAAW/G,QAzBO,SAACiD,GAC3B6C,EAAUW,QAAQS,IAAIjE,GACtB6C,EAAUW,QAAQQ,gBA0Bd,cAAC9G,EAAA,EAAD,CAAYgH,MAAOvB,EAAQ,QAAU,UAArC,SAAiDF,Y,4ECkB1CrG,eAJS,SAACC,GAAD,MAAY,CAClCC,OAAQD,EAAMC,UAGwB,CACtCb,mBACAG,uBAFaQ,EA7IO,SAACG,GAAW,IACxB4H,EAA2C5H,EAA3C4H,UAAWC,EAAgC7H,EAAhC6H,SAAU7B,EAAsBhG,EAAtBgG,MAAO8B,EAAe9H,EAAf8H,WADL,EAGS7B,oBAAS,GAHlB,mBAGxB8B,EAHwB,KAGVC,EAHU,OAIP/B,mBAAS2B,GAJF,mBAIxBK,EAJwB,KAIlBC,EAJkB,KAKzBC,EAAe5B,iBAAO,MALG,EAOWN,oBAAS,GAPpB,mBAOxBmC,EAPwB,KAOTC,EAPS,OAQLpC,mBAAS4B,GARJ,mBAQxBR,EARwB,KAQjBiB,EARiB,KASzBC,EAAgBhC,iBAAO,MAE7BiC,qBAAU,WACJT,IACJI,EAAalB,QAAQQ,QACrBU,EAAalB,QAAQwB,YACpB,CAACV,IAEJS,qBAAU,WACJJ,IACJG,EAActB,QAAQQ,QACtBc,EAActB,QAAQwB,YACrB,CAACL,IAEJI,qBAAU,WACRN,EAAQN,KACP,CAACA,IAEJ,IAgBMc,EAAmB,SAACC,GACxBA,EAAMC,iBACNP,GAAiB,GACjBL,GAAgB,GAChB,IACEhC,EAAM9D,QAAQ0F,EAAWK,GACzBH,IACA,MAAOZ,GACPC,QAAQC,IAAIF,GACZgB,EAAQN,KAINiB,EAAoB,SAACF,GACzBA,EAAMC,iBACNP,GAAiB,GACjBL,GAAgB,GAEhB,IACE,IAAMc,EAAcC,SAAS1B,GAC7BrB,EAAMgD,IAAIf,EAAMa,GAChBhB,IACA,MAAOZ,GACPC,QAAQC,IAAIF,GACZoB,EAAST,KASb,OACE,sBAAKpH,MAAO,CAAEuE,QAAS,QAAvB,UACE,cAACtB,EAAA,EAAD,CAAQlD,QAnDc,WACxBwH,GAAgB,IAkDd,SACE,sBAAM3C,SAAUqD,EAAhB,SACE,cAACO,EAAA,EAAD,CACEtF,QAAQ,WACRuF,KAAK,QACLzI,MAAO,CAAE0I,YAAa,IACtBxC,WAAY,CACVlG,MAAO,CAAEC,OAAQqH,EAAe,UAAY,SAE9CzD,SAAUyD,EACVV,MAAOY,EACPmB,SAAUjB,EACV/C,SAnDe,SAACuD,GACxBT,EAAQS,EAAMU,OAAOhC,QAmDbiC,OAAQZ,QAId,eAAChF,EAAA,EAAD,CACElD,QAjEqB,WACzB6H,GAAiB,IAiEbf,WAAS,EACT7G,MAAO,CAAEuE,QAAS,QAHpB,UAKE,cAACrE,EAAA,EAAD,CACEgD,QAAQ,QACRlD,MAAO,CAAEd,KAAM,EAAG4J,UAAW,OAAQC,aAAc,IAFrD,eAMA,sBAAMnE,SAAUwD,EAAhB,SACE,cAACI,EAAA,EAAD,CACEtF,QAAQ,WACRuF,KAAK,QACLzI,MAAO,CAAE+I,aAAc,IACvB7C,WAAY,CACVlG,MAAO,CAAEC,OAAQ0H,EAAgB,UAAY,SAE/C9D,SAAU8D,EACVqB,YAAW,UAAKpC,GAChBA,MAAOA,EACP+B,SAAUb,EACVnD,SAnFmB,SAACuD,GAC5BL,EAASK,EAAMU,OAAOhC,QAmFdiC,OAAQT,SAId,cAACnF,EAAA,EAAD,CAAQlD,QApDiB,WAC3BwF,EAAM0D,OAAO9B,GACbE,KAkDE,SACE,cAAC,IAAD,YCqBOjI,eAJS,SAACC,GAAD,MAAY,CAClCC,OAAQD,EAAMC,UAGwB,CACtCb,mBACAG,uBAFaQ,CAGZ8J,KAzIY,SAAClK,GAAD,mBAAC,eACXA,EAAMkF,UADI,IAEbC,MAAM,2BACDnF,EAAMkF,SAASC,OADf,IAEHC,OAAQ,OACRG,QAAS,OACTD,cAAe,WAEjB6E,gBAAiB,CACfjK,KAAM,EACNC,SAAU,OACVsF,WAAY,IAEd2E,aAAc,CAEZhF,OAAQ,OACRiF,MAAO,QAETC,UAAW,CAETlF,OAAQ,OACRiF,MAAO,YAoHRH,EA1G0B,SAAC3J,GAAW,IAErCG,EAOEH,EAPFG,QAMA6F,GACEhG,EANFd,iBAMEc,EALFX,oBAKEW,EAJFD,OACEG,WAAc8J,UAGdhK,EADFgG,OARoC,EAWXC,mBAAS,GAXE,mBAW/BgE,EAX+B,KAWtBC,EAXsB,KAqDhCC,EAAc,WAClBD,EAAQD,EAAU,IAGpB,OACE,cAAC,IAAD,CAAiBG,UAbD,SAACC,GACZA,EAAOC,aAYZ,SACE,eAAC9D,EAAA,EAAD,CAAO5F,UAAWT,EAAQyE,MAA1B,UACE,qBAAKhE,UAAWT,EAAQyJ,gBAAxB,SAC6B,IAA1B5D,EAAMuE,WAAWrB,KAChBnI,IAAMC,SAASC,QACbuJ,MAAMC,KAAKzE,EAAMuE,WAAWG,WAAWxJ,KAAI,mCAAEyJ,EAAF,KAAO/D,EAAP,YACzC,cAAC,EAAD,CACEZ,MAAOA,EACP4B,UAAW+C,EACX9C,SAAUjB,EACVkB,WAAYqC,QAKlB,mGAKJ,eAACS,EAAA,EAAD,CAASC,gBAAc,EAAvB,UACE,cAACC,EAAA,EAAD,CAASC,MAAM,eAAeC,UAAU,MAAxC,SACE,cAACtH,EAAA,EAAD,CAAQ9C,UAAWT,EAAQ4J,UAAWvJ,QAnE5B,WAYlB,IANA,IAAIyK,EAAU,6BAA6BC,MAAM,IAC7C/J,EAAI,EACJgK,EAAMF,EAAQG,QAAO,SAACC,GACxB,OAAQrF,EAAMsF,IAAID,MAGE,IAAfF,EAAItK,QAGTsK,GADAA,EAAMF,EAAQ/J,KAAI,SAACmK,GAAD,OAAOA,EAAC,UAAMlK,OACtBiK,QAAO,SAACC,GAChB,OAAQrF,EAAMsF,IAAID,MAGpBlK,IAGF,IAAMoK,EAAUJ,EAAI,GACpBnF,EAAMgD,IAAIuC,EAAS,GACnBpB,KA2CQ,SACE,cAAC,IAAD,QAGJ,cAACW,EAAA,EAAD,CAASC,MAAM,YAAYC,UAAU,MAArC,SACE,cAACtH,EAAA,EAAD,CAAQ9C,UAAWT,EAAQ0J,aAAcrJ,QA7C5B,WACrBwF,EAAMwF,YACNrB,KA2CQ,SACE,cAAC,IAAD,CAAYxC,MAAM,0B,wBC5H1B3B,EAAQ,I,WCpBZ,aAAe,oBACbyF,KAAKlB,WAAa,IAAImB,I,uCAGxB,SAAIf,GACF,OAAOc,KAAKlB,WAAWoB,IAAIhB,K,iBAG7B,SAAIA,EAAKtD,GACP,IAAMuE,EAAcH,KAAKlB,WAAWvB,IAAI2B,EAAKtD,GAE7C,OADAoE,KAAKI,SACED,I,iBAGT,SAAIjB,GACF,OAAOc,KAAKlB,WAAWe,IAAIX,K,kBAG7B,WACE,OAAOc,KAAKlB,WAAWuB,S,oBAGzB,SAAOnB,GACL,IAAMiB,EAAcH,KAAKlB,WAAWb,OAAOiB,GAG3C,OAFAc,KAAKI,SACL1E,QAAQC,IAAIqE,KAAKlB,YACVqB,I,qBAGT,SAAQG,EAAM9D,GACZ,IACErB,EAFgB,EACdoF,EAAQ,EADM,cAGSP,KAAKlB,YAHd,IAGlB,2BAA4C,CAAC,IAAD,yBAAhCI,EAAgC,KAA3BtD,EAA2B,KAC1C,GAAIsD,IAAQoB,EAAM,MAClBC,IACA7E,QAAQC,IAAIuD,EAAKtD,IAND,8BASlBT,EAAM6E,KAAKE,IAAII,GACfN,KAAK/B,OAAOqC,GACZN,KAAKzC,IAAIf,EAAMrB,GACf6E,KAAKQ,SAASR,KAAKlB,WAAWrB,KAAO,EAAG8C,K,uBAG1C,WACEP,KAAKlB,WAAW2B,QAChBC,aAAaC,WAAW,oB,sBAI1B,SAASC,EAAOC,GACd,IAAIjC,EAASG,MAAMC,KAAKgB,KAAKlB,YAAY,yCAAoB,CAC3DtC,KADuC,KAEvCZ,MAFuC,SADtB,EAMDgD,EAAOkC,OAAOF,EAAO,GAAhCG,EANY,oBAOnBnC,EAAOkC,OAAOD,EAAK,EAAGE,GAEtBf,KAAKlB,WAAW2B,QAEhB,IAAK,IAAIO,EAAI,EAAGA,EAAIpC,EAAOxJ,OAAQ4L,IACjChB,KAAKlB,WAAWvB,IAAIqB,EAAOoC,GAAGxE,KAAMoC,EAAOoC,GAAGpF,OAGhDoE,KAAKI,W,sBAGP,WACOM,aAAaO,QAAQ,oBAC1BjB,KAAKlB,WAAa,IAAImB,IACpBiB,KAAKC,MAAMT,aAAaO,QAAQ,uB,oBAIpC,WACEP,aAAaU,QACX,iBACAF,KAAKG,UAAUtC,MAAMC,KAAKgB,KAAKlB,WAAWG,iB,MDzDhD1E,EAAM+G,WACN5F,QAAQC,IAAIpB,GAEZ,IAwBenG,eAAQ,KAAM,CAAEmN,eP1CD,SAACC,GAAD,OAAY,SAACnO,GACzCA,EAAS,CAAEC,KAAMmO,IAAiBjO,QAASgO,OOyC9BpN,CACb8J,KAzBa,SAAClK,GAAD,mBAAC,eACXA,EAAMkF,UADI,IAEbjF,KAAM,CACJyN,OAAQ,YAsBVxD,EAlB8B,SAAC3J,GAAW,IAClCG,EAA4BH,EAA5BG,QAA4BH,EAAnBgN,eAEjB,OACE,eAAChJ,EAAA,EAAD,CAAMC,WAAS,EAACE,QAAS,EAAGvD,UAAWT,EAAQT,KAA/C,UACE,cAACsE,EAAA,EAAD,CAAME,MAAI,EAACqD,GAAI,EAAf,SACE,cAACf,EAAA,EAAD,CAAO5F,UAAWT,EAAQyE,MAA1B,SACE,cAAC,EAAD,CAAYoB,MAAOA,QAGvB,cAAChC,EAAA,EAAD,CAAME,MAAI,EAACqD,GAAI,EAAf,SACE,cAAC,EAAD,CAAevB,MAAOA,aEdf2D,eAtBA,SAAClK,GAAD,mBAAC,eACXA,EAAMkF,UADI,IAEbjF,KAAM,CACJ0N,WAAY,IACZC,YAAa,GACbC,UAAW,GACXnE,YAAa,GACbK,aAAc,GACdtE,WAAY,GACZqI,UAAW,WAaA5D,EATC,SAAC3J,GAAW,IAClBG,EAAYH,EAAZG,QACR,OACE,qBAAKS,UAAWT,EAAQT,KAAxB,SACE,cAAC,GAAD","file":"static/js/20.32ea12ae.chunk.js","sourcesContent":["import {\r\n  CALC_PUSH_HISTORY,\r\n  CALC_SET_INPUT,\r\n  CALC_ADD_VARIABLE,\r\n  CALC_REMOVE_VARIABLE,\r\n  CALC_SET_PARSER,\r\n} from \"../types\";\r\n\r\nexport const calc_setParser = (parser) => (dispatch) => {\r\n  dispatch({ type: CALC_SET_PARSER, payload: parser });\r\n};\r\n\r\nexport const calc_addHistory = (latex) => (dispatch) => {\r\n  dispatch({ type: CALC_PUSH_HISTORY, payload: latex });\r\n  //dispatch({ type: CALC_POP_HISTORY });\r\n};\r\n\r\nexport const calc_setInput = (latex) => (dispatch) => {\r\n  dispatch({ type: CALC_SET_INPUT, payload: latex });\r\n};\r\nexport const calc_addVariable = (variable) => (dispatch) => {\r\n  dispatch({ type: CALC_ADD_VARIABLE, payload: variable });\r\n};\r\nexport const calc_removeVariable = (variable) => (dispatch) => {\r\n  dispatch({ type: CALC_REMOVE_VARIABLE, payload: variable });\r\n};\r\n","// React\r\nimport React, { useState } from \"react\";\r\n\r\n// MUI\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\r\n\r\n// Redux\r\nimport { connect } from \"react-redux\";\r\nimport { calc_setInput } from \"../../../redux/actions/moduleActions\";\r\n\r\n// Math\r\nimport { StaticMathField } from \"react-mathquill\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flex: 1,\r\n    overflow: \"auto\",\r\n  },\r\n}));\r\n\r\nexport const History = (props) => {\r\n  const {\r\n    module: {\r\n      calculator: { history },\r\n    },\r\n    calc_setInput,\r\n  } = props;\r\n\r\n  const classes = useStyles();\r\n\r\n  const HistoryButton = (props) => {\r\n    const { latex, ans } = props;\r\n    return (\r\n      <ListItem button onClick={() => calc_setInput(latex)}>\r\n        <StaticMathField style={{ flex: 1, cursor: \"pointer\" }}>\r\n          {latex}\r\n        </StaticMathField>\r\n        <Typography>= {ans}</Typography>\r\n      </ListItem>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {history.length !== 0 ? (\r\n        <List>\r\n          {React.Children.toArray(\r\n            history.map((x) => (\r\n              <>\r\n                <Divider />\r\n                <HistoryButton latex={x.latex} ans={x.ans} />\r\n              </>\r\n            ))\r\n          )}\r\n        </List>\r\n      ) : (\r\n        <h1>\r\n          Type an equation to show history...\r\n          <br /> [insert cool image/space filler here]\r\n        </h1>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  module: state.module,\r\n});\r\n\r\nexport default connect(mapStateToProps, { calc_setInput })(History);\r\n","/**\r\n * Thank you ChristopherChudzicki for this code! (copy-paste)\r\n *\r\n * Makes a series of replacements on MathQuill-generated LaTeX strings so that\r\n * they can be parsed by MathJS.\r\n *\r\n * Notes:\r\n *  1. This is pretty heuristic. Might discover updates needed.\r\n *  2. Much of this could be used to preprocess LaTeX generated by other means\r\n * (i.e., not MathQuill.) The main bit that is MathQuill-specific is probably\r\n * the operatorname replacements.\r\n *\r\n * @param  {string} fromMQ a MathQuill-generated LaTeX expression\r\n * @return {string} the input expression with LaTeX commands converted to mathjs\r\n */\r\nexport default function mathquillToMathJS(fromMQ) {\r\n  const replacements = [\r\n    { tex: \"\\\\operatorname{diff}\", mathjs: \"diff\" },\r\n    { tex: \"\\\\operatorname{pdiff}\", mathjs: \"pdiff\" },\r\n    { tex: \"\\\\operatorname{curl}\", mathjs: \"curl\" },\r\n    { tex: \"\\\\operatorname{div}\", mathjs: \"div\" },\r\n    { tex: \"\\\\operatorname{norm}\", mathjs: \"norm\" },\r\n    { tex: \"\\\\operatorname{mod}\", mathjs: \"mod\" },\r\n    { tex: \"\\\\operatorname{abs}\", mathjs: \"abs\" },\r\n    { tex: \"\\\\operatorname{unitT}\", mathjs: \"unitT\" },\r\n    { tex: \"\\\\operatorname{unitN}\", mathjs: \"unitN\" },\r\n    { tex: \"\\\\operatorname{unitB}\", mathjs: \"unitB\" },\r\n    { tex: \"\\\\operatorname{arccosh}\", mathjs: \"arccosh\" },\r\n    { tex: \"\\\\operatorname{arcsinh}\", mathjs: \"arcsinh\" },\r\n    { tex: \"\\\\operatorname{arctanh}\", mathjs: \"arctanh\" },\r\n    { tex: \"\\\\cdot\", mathjs: \" * \" },\r\n    { tex: \"\\\\left\", mathjs: \"\" },\r\n    { tex: \"\\\\right\", mathjs: \"\" },\r\n    { tex: \"{\", mathjs: \"(\" },\r\n    { tex: \"}\", mathjs: \")\" },\r\n    { tex: \"~\", mathjs: \" \" },\r\n    { tex: \"\\\\\", mathjs: \" \" },\r\n  ];\r\n\r\n  // remove fractions, then apply replacements\r\n  const noFrac = fracToDivision(fromMQ);\r\n  const noBraceSub = convertSubscript(noFrac);\r\n  return replacements.reduce(\r\n    (acc, r) => replaceAll(acc, r[\"tex\"], r[\"mathjs\"]),\r\n    noBraceSub\r\n  );\r\n}\r\n\r\n/**\r\n * Recursively removes braces from LaTeX subscripts\r\n *   - example: x_{12foo_{bar123_{evenlower}}} --> x_12foo_bar123_evenlower\r\n */\r\nexport function convertSubscript(expr) {\r\n  const sub = \"_{\";\r\n  const subStart = expr.indexOf(sub);\r\n\r\n  if (subStart < 0) {\r\n    return expr;\r\n  }\r\n\r\n  const numStart = subStart + sub.length;\r\n  const closingBrace = expr.indexOf(\"}\", numStart);\r\n  const newExpr =\r\n    expr.slice(0, subStart) +\r\n    \"_\" +\r\n    expr.slice(numStart, closingBrace) +\r\n    expr.slice(closingBrace + 1);\r\n\r\n  return convertSubscript(newExpr);\r\n}\r\n\r\n/**\r\n * Recursively replaces LaTeX fractions with normal divison\r\n *   - example: \\frac{a}{1 + \\frac{b}{c}} --> {a}/{1 + {b}/{c}}\r\n */\r\nexport function fracToDivision(expr) {\r\n  const frac = \"\\\\frac\";\r\n  const fracStart = expr.indexOf(frac);\r\n  const numStart = fracStart + frac.length;\r\n\r\n  if (fracStart < 0) {\r\n    return expr;\r\n  }\r\n\r\n  const divIdx = findClosingBrace(expr, numStart);\r\n  // Remove frac, and add \"/\"\r\n  const newExpr =\r\n    expr.slice(0, fracStart) +\r\n    expr.slice(numStart, divIdx + 1) +\r\n    \"/\" +\r\n    expr.slice(divIdx + 1);\r\n\r\n  return fracToDivision(newExpr);\r\n}\r\n\r\nexport function capitalize(string) {\r\n  return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\r\n}\r\n\r\nexport function escapeRegExp(str) {\r\n  // from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Using_Special_Characters\r\n  // $& means the whole matched string\r\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\r\n}\r\n\r\nexport function replaceAll(str, find, replaceWith) {\r\n  // from https://stackoverflow.com/a/1144788/2747370\r\n  return str.replace(new RegExp(escapeRegExp(find), \"g\"), replaceWith);\r\n}\r\n\r\nexport function findClosingBrace(str, startIdx) {\r\n  const braces = {\r\n    \"[\": \"]\",\r\n    \"<\": \">\",\r\n    \"(\": \")\",\r\n    \"{\": \"}\",\r\n  };\r\n\r\n  const openingBrace = str[startIdx];\r\n\r\n  const closingBrace = braces[openingBrace];\r\n\r\n  if (closingBrace === undefined) {\r\n    throw Error(\r\n      `${str} does not contain an opening brace at position ${startIdx}.`\r\n    );\r\n  }\r\n\r\n  let stack = 1;\r\n\r\n  // eslint-disable-next-line no-plusplus\r\n  for (let j = startIdx + 1; j < str.length; j++) {\r\n    if (str[j] === openingBrace) {\r\n      stack += +1;\r\n    } else if (str[j] === closingBrace) {\r\n      stack += -1;\r\n    }\r\n    if (stack === 0) {\r\n      return j;\r\n    }\r\n  }\r\n\r\n  // stack !== 0\r\n  throw Error(\r\n    `${str} has a brace that opens at position ${startIdx} but does not close.`\r\n  );\r\n}\r\n","// React\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n// MUI\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst useStyles = makeStyles({\r\n  numPadRoot: {},\r\n  symbolPadRoot: {},\r\n  button: {\r\n    //backgroundColor: (props) =>\r\n    //props.UI.theme === 1 ? \"rgb(63,63,63)\" : \"rgb(243,243,243)\",\r\n    //flex: 1,\r\n  },\r\n});\r\n\r\nconst SymbolButton = (props) => {\r\n  const { onClick, latex, symbol } = props;\r\n  const classes = useStyles(props);\r\n  return (\r\n    <Button\r\n      className={classes.button}\r\n      variant=\"contained\"\r\n      onClick={() => onClick(latex)}\r\n    >\r\n      {symbol}\r\n    </Button>\r\n  );\r\n};\r\nconst mapStateToProps = (state) => ({\r\n  UI: state.UI,\r\n});\r\nexport const NumPad = connect(mapStateToProps)((props) => {\r\n  const classes = useStyles(props);\r\n  const {\r\n    onClick,\r\n    UI: { theme },\r\n  } = props;\r\n\r\n  const NumRow = ({ arr }) => {\r\n    return (\r\n      <Grid container item spacing={1} wrap=\"nowrap\">\r\n        {React.Children.toArray(\r\n          arr.map((num) => (\r\n            <Grid item>\r\n              {num !== null ? (\r\n                <SymbolButton onClick={onClick} latex={num} symbol={num} />\r\n              ) : (\r\n                <Button\r\n                  className={classes.button}\r\n                  variant=\"contained\"\r\n                  disabled\r\n                />\r\n              )}\r\n            </Grid>\r\n          ))\r\n        )}\r\n      </Grid>\r\n    );\r\n  };\r\n  return (\r\n    <Grid container spacing={1} wrap=\"nowrap\" direction=\"column\">\r\n      <NumRow arr={[1, 2, 3]} />\r\n      <NumRow arr={[4, 5, 6]} />\r\n      <NumRow arr={[7, 8, 9]} />\r\n      <NumRow arr={[null, 0, \".\"]} />\r\n    </Grid>\r\n  );\r\n});\r\n\r\nexport const SymbolPad = (props) => {\r\n  const { onClick } = props;\r\n  const symbols = [\r\n    { symbol: \"+\", latex: \"+\" },\r\n    { symbol: \"-\", latex: \"-\" },\r\n    { symbol: \"*\", latex: \"cdot\" },\r\n    { symbol: \"/\", latex: \"frac\" },\r\n    { symbol: \"√\", latex: \"sqrt\" },\r\n    { symbol: \"^\", latex: \"^\" },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <Grid container spacing={1}>\r\n        <Grid container item spacing={1}>\r\n          {React.Children.toArray(\r\n            symbols.map((obj) => {\r\n              return (\r\n                <Grid item>\r\n                  <SymbolButton\r\n                    onClick={onClick}\r\n                    latex={obj.latex}\r\n                    symbol={obj.symbol}\r\n                  />\r\n                </Grid>\r\n              );\r\n            })\r\n          )}\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n};\r\n\r\nNumPad.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nSymbolPad.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n","// React\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n// MUI\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\r\n\r\n// Redux\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  calc_addHistory,\r\n  calc_setInput,\r\n} from \"../../../redux/actions/moduleActions\";\r\n\r\n// Components\r\nimport History from \"./History\";\r\n\r\n// Math related\r\nimport mathquillToMathJS from \"../../../util/latex/preprocessMathQuill\";\r\nimport { addStyles, EditableMathField, StaticMathField } from \"react-mathquill\";\r\nimport { NumPad, SymbolPad } from \"./CalcTools\";\r\nimport * as math from \"mathjs\";\r\n\r\n// required for latex to format correctly\r\naddStyles();\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  ...theme.spreadIt,\r\n  paper: {\r\n    ...theme.spreadIt.paper,\r\n    height: \"80vh\",\r\n  },\r\n  rootPadding: {\r\n    ...theme.spreadIt.rootPadding,\r\n    flexDirection: \"column\",\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n  },\r\n  symbolPadGrid: {\r\n    paddingTop: 15,\r\n  },\r\n}));\r\n\r\nconst LatexInput = (props) => {\r\n  const { onChange, onSubmit, mathquillDidMount } = props;\r\n\r\n  return (\r\n    <EditableMathField\r\n      latex=\"\"\r\n      style={{ height: \"auto\", fontSize: 50, flex: 1 }}\r\n      config={{\r\n        autoCommands: \"pi theta sqrt sum\",\r\n        autoOperatorNames:\r\n          \"sin cos tan feet ft inches in miles cm sech arcsec arsinh to rad deg radians degrees\",\r\n        handlers: {\r\n          enter: onSubmit,\r\n        },\r\n      }}\r\n      onChange={onChange}\r\n      mathquillDidMount={mathquillDidMount}\r\n    />\r\n  );\r\n};\r\n\r\nexport const Calculator = (props) => {\r\n  const {\r\n    module: {\r\n      calculator: { input },\r\n    },\r\n    calc_addHistory,\r\n    calc_setInput,\r\n    scope,\r\n  } = props;\r\n\r\n  const classes = useStyles();\r\n\r\n  const [answer, setAnswer] = useState(\"\");\r\n  const [error, setError] = useState(false);\r\n\r\n  const mathField = useRef(null);\r\n\r\n  const handleSubmit = (val) => {\r\n    try {\r\n      const node = math.parse(mathquillToMathJS(val.latex()));\r\n      const compiled = node.compile();\r\n      let ans = compiled.evaluate(scope);\r\n      ans = math.format(ans, { precision: 14 });\r\n\r\n      setAnswer(`${ans}`);\r\n      setError(false);\r\n      calc_addHistory({ latex: val.latex(), ans: `${ans}` });\r\n      mathField.current.latex(\"\");\r\n    } catch (err) {\r\n      console.log(err);\r\n      setAnswer(\"ERROR!!!!\");\r\n      setError(true);\r\n    }\r\n  };\r\n\r\n  const handleMathquillMount = (val) => {\r\n    mathField.current = val;\r\n  };\r\n\r\n  const handleNumberPressed = (num) => {\r\n    mathField.current.write(num);\r\n    mathField.current.focus();\r\n  };\r\n\r\n  const handleSymbolPressed = (symbol) => {\r\n    mathField.current.cmd(symbol);\r\n    mathField.current.focus();\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.paper}>\r\n      <div className={classes.rootPadding}>\r\n        <History />\r\n        <InputBase\r\n          inputComponent={LatexInput}\r\n          inputProps={{\r\n            onSubmit: handleSubmit,\r\n            //onChange: handleChange,\r\n            mathquillDidMount: handleMathquillMount,\r\n          }}\r\n          /*className={classes.input}*/\r\n          value=\"\"\r\n          fullWidth\r\n        />\r\n        <Grid container spacing={2} className={classes.symbolPadGrid}>\r\n          <Grid item xs>\r\n            <NumPad onClick={handleNumberPressed} />\r\n          </Grid>\r\n          <Grid item xs>\r\n            <SymbolPad onClick={handleSymbolPressed} />\r\n          </Grid>\r\n        </Grid>\r\n        <Typography color={error ? \"error\" : \"initial\"}>{answer}</Typography>\r\n      </div>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nCalculator.propTypes = {\r\n  scope: PropTypes.any.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  module: state.module,\r\n});\r\n\r\nexport default connect(mapStateToProps, { calc_addHistory, calc_setInput })(\r\n  Calculator\r\n);\r\n","// React\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n// MUI\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\n\r\n// Redux\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  calc_addVariable,\r\n  calc_removeVariable,\r\n} from \"../../../redux/actions/moduleActions\";\r\n\r\nconst VariableField = (props) => {\r\n  const { startName, startVal, scope, updateList } = props;\r\n\r\n  const [nameDisabled, setNameDisabled] = useState(true);\r\n  const [name, setName] = useState(startName);\r\n  const nameInputRef = useRef(null);\r\n\r\n  const [valueDisabled, setValueDisabled] = useState(true);\r\n  const [value, setValue] = useState(startVal);\r\n  const valueInputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (nameDisabled) return;\r\n    nameInputRef.current.focus();\r\n    nameInputRef.current.select();\r\n  }, [nameDisabled]);\r\n\r\n  useEffect(() => {\r\n    if (valueDisabled) return;\r\n    valueInputRef.current.focus();\r\n    valueInputRef.current.select();\r\n  }, [valueDisabled]);\r\n\r\n  useEffect(() => {\r\n    setName(startName);\r\n  }, [startName]);\r\n\r\n  const handleNameClicked = () => {\r\n    setNameDisabled(false);\r\n  };\r\n\r\n  const handleValueClicked = () => {\r\n    setValueDisabled(false);\r\n  };\r\n\r\n  const handleVariableChange = (event) => {\r\n    setValue(event.target.value);\r\n  };\r\n\r\n  const handleNameChange = (event) => {\r\n    setName(event.target.value);\r\n  };\r\n\r\n  const handleSubmitName = (event) => {\r\n    event.preventDefault();\r\n    setValueDisabled(true);\r\n    setNameDisabled(true);\r\n    try {\r\n      scope.replace(startName, name);\r\n      updateList();\r\n    } catch (err) {\r\n      console.log(err);\r\n      setName(startName);\r\n    }\r\n  };\r\n\r\n  const handleSubmitValue = (event) => {\r\n    event.preventDefault();\r\n    setValueDisabled(true);\r\n    setNameDisabled(true);\r\n\r\n    try {\r\n      const parsedValue = parseInt(value);\r\n      scope.set(name, parsedValue);\r\n      updateList();\r\n    } catch (err) {\r\n      console.log(err);\r\n      setValue(startVal);\r\n    }\r\n  };\r\n\r\n  const handleRemoveVariable = () => {\r\n    scope.delete(startName);\r\n    updateList();\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      <Button onClick={handleNameClicked}>\r\n        <form onSubmit={handleSubmitName}>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            style={{ paddingLeft: 10 }}\r\n            inputProps={{\r\n              style: { cursor: nameDisabled ? \"pointer\" : \"auto\" },\r\n            }}\r\n            disabled={nameDisabled}\r\n            value={name}\r\n            inputRef={nameInputRef}\r\n            onChange={handleNameChange}\r\n            onBlur={handleSubmitName}\r\n          />\r\n        </form>\r\n      </Button>\r\n      <Button\r\n        onClick={handleValueClicked}\r\n        fullWidth\r\n        style={{ display: \"flex\" }}\r\n      >\r\n        <Typography\r\n          variant=\"body1\"\r\n          style={{ flex: 1, textAlign: \"left\", paddingRight: 10 }}\r\n        >\r\n          =\r\n        </Typography>\r\n        <form onSubmit={handleSubmitValue}>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            style={{ paddingRight: 10 }}\r\n            inputProps={{\r\n              style: { cursor: valueDisabled ? \"pointer\" : \"auto\" },\r\n            }}\r\n            disabled={valueDisabled}\r\n            placeholder={`${value}`}\r\n            value={value}\r\n            inputRef={valueInputRef}\r\n            onChange={handleVariableChange}\r\n            onBlur={handleSubmitValue}\r\n          />\r\n        </form>\r\n      </Button>\r\n      <Button onClick={handleRemoveVariable}>\r\n        <DeleteIcon />\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nVariableField.propTypes = {\r\n  scope: PropTypes.any.isRequired,\r\n  updateList: PropTypes.func.isRequired,\r\n  startName: PropTypes.string.isRequired,\r\n  startVal: PropTypes.number.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  module: state.module,\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n  calc_addVariable,\r\n  calc_removeVariable,\r\n})(VariableField);\r\n","// React\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n// MUI\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\n\r\n// Drag-n-Drop\r\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\r\n\r\n// Redux\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  calc_addVariable,\r\n  calc_removeVariable,\r\n} from \"../../../redux/actions/moduleActions\";\r\n\r\n// Calculator\r\nimport VariableField from \"./VariableField\";\r\n\r\nconst styles = (theme) => ({\r\n  ...theme.spreadIt,\r\n  paper: {\r\n    ...theme.spreadIt.paper,\r\n    height: \"80vh\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n  },\r\n  variableWrapper: {\r\n    flex: 1,\r\n    overflow: \"auto\",\r\n    paddingTop: 25,\r\n  },\r\n  deleteButton: {\r\n    //margin: \"auto\",\r\n    height: \"100%\",\r\n    width: \"100%\",\r\n  },\r\n  addButton: {\r\n    //margin: \"auto\",\r\n    height: \"100%\",\r\n    width: \"100%\",\r\n  },\r\n});\r\n\r\nconst getItems = (count) =>\r\n  Array.from({ length: count }, (v, k) => k).map((k) => ({\r\n    id: `item-${k}`,\r\n    content: `item ${k}`,\r\n  }));\r\n\r\nexport const CalcVariables = (props) => {\r\n  const {\r\n    classes,\r\n    calc_addVariable,\r\n    calc_removeVariable,\r\n    module: {\r\n      calculator: { variables },\r\n    },\r\n    scope,\r\n  } = props;\r\n\r\n  const [useless, badCode] = useState(0);\r\n\r\n  const addVariable = () => {\r\n    // map over \"common name variables\" (abc...)\r\n    // remove from array based on the variables we already have\r\n    // we can make this over again cuz i'm lazy...\r\n    // also not competitive programming soooo....\r\n    // although O(n) space vs O(n) time so idk...\r\n    let letters = \"abcdefghijklmnopqrstuvwxyz\".split(\"\");\r\n    let x = 1; // increase every loop, we append this to end of each letter until it works...\r\n    let tmp = letters.filter((c) => {\r\n      return !scope.has(c);\r\n    });\r\n\r\n    while (tmp.length === 0) {\r\n      //eslint-disable-next-line\r\n      tmp = letters.map((c) => c + `${x}`);\r\n      tmp = tmp.filter((c) => {\r\n        return !scope.has(c);\r\n      });\r\n\r\n      x++;\r\n    }\r\n\r\n    const varName = tmp[0];\r\n    scope.set(varName, 1);\r\n    forceUpdate();\r\n  };\r\n\r\n  const clearVariables = () => {\r\n    scope.deleteAll();\r\n    forceUpdate();\r\n  };\r\n\r\n  const onDragEnd = (result) => {\r\n    if (!result.destination) return;\r\n\r\n    // TODO: look at docs for dnd\r\n    // use redux to store all variables + order\r\n    // inject into parser on load i guess?\r\n  };\r\n\r\n  const forceUpdate = () => {\r\n    badCode(useless + 1);\r\n  };\r\n\r\n  return (\r\n    <DragDropContext onDragEnd={onDragEnd}>\r\n      <Paper className={classes.paper}>\r\n        <div className={classes.variableWrapper}>\r\n          {scope.localScope.size !== 0 ? (\r\n            React.Children.toArray(\r\n              Array.from(scope.localScope.entries()).map(([key, val]) => (\r\n                <VariableField\r\n                  scope={scope}\r\n                  startName={key}\r\n                  startVal={val}\r\n                  updateList={forceUpdate}\r\n                />\r\n              ))\r\n            )\r\n          ) : (\r\n            <h1>\r\n              Type variables in text box (e.g. x=5) or press the button below\r\n            </h1>\r\n          )}\r\n        </div>\r\n        <Toolbar disableGutters>\r\n          <Tooltip title=\"Add Variable\" placement=\"top\">\r\n            <Button className={classes.addButton} onClick={addVariable}>\r\n              <AddIcon />\r\n            </Button>\r\n          </Tooltip>\r\n          <Tooltip title=\"Clear All\" placement=\"top\">\r\n            <Button className={classes.deleteButton} onClick={clearVariables}>\r\n              <DeleteIcon color=\"error\" />\r\n            </Button>\r\n          </Tooltip>\r\n        </Toolbar>\r\n      </Paper>\r\n    </DragDropContext>\r\n  );\r\n};\r\n\r\nCalcVariables.propTypes = {\r\n  scope: PropTypes.any.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  module: state.module,\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n  calc_addVariable,\r\n  calc_removeVariable,\r\n})(withStyles(styles)(CalcVariables));\r\n","// React\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\n\r\n// MUI\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\n\r\n// Redux\r\nimport { connect } from \"react-redux\";\r\nimport { calc_setParser } from \"../../../redux/actions/moduleActions\";\r\n\r\n// Components\r\nimport Calculator from \"./Calculator\";\r\nimport CalcVariables from \"./CalcVariables\";\r\n\r\n// Math\r\nimport MathScope from \"./MathScope\";\r\n\r\nconst scope = new MathScope();\r\nscope.fromJSON();\r\nconsole.log(scope);\r\n\r\nconst styles = (theme) => ({\r\n  ...theme.spreadIt,\r\n  root: {\r\n    margin: \"auto\",\r\n  },\r\n});\r\n\r\nexport const CalculatorModule = (props) => {\r\n  const { classes, calc_setParser } = props;\r\n\r\n  return (\r\n    <Grid container spacing={2} className={classes.root}>\r\n      <Grid item xs={8}>\r\n        <Paper className={classes.paper}>\r\n          <Calculator scope={scope} />\r\n        </Paper>\r\n      </Grid>\r\n      <Grid item xs={4}>\r\n        <CalcVariables scope={scope} />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default connect(null, { calc_setParser })(\r\n  withStyles(styles)(CalculatorModule)\r\n);\r\n","// This is a minimal set of functions to look like a Map.\r\nclass MathScope {\r\n  constructor() {\r\n    this.localScope = new Map();\r\n  }\r\n\r\n  get(key) {\r\n    return this.localScope.get(key);\r\n  }\r\n\r\n  set(key, value) {\r\n    const probUseless = this.localScope.set(key, value);\r\n    this.toJSON();\r\n    return probUseless;\r\n  }\r\n\r\n  has(key) {\r\n    return this.localScope.has(key);\r\n  }\r\n\r\n  keys() {\r\n    return this.localScope.keys();\r\n  }\r\n\r\n  delete(key) {\r\n    const probUseless = this.localScope.delete(key);\r\n    this.toJSON();\r\n    console.log(this.localScope);\r\n    return probUseless;\r\n  }\r\n\r\n  replace(prev, name) {\r\n    let index = 0,\r\n      val;\r\n    for (const [key, value] of this.localScope) {\r\n      if (key === prev) break;\r\n      index++;\r\n      console.log(key, value);\r\n    }\r\n\r\n    val = this.get(prev);\r\n    this.delete(prev);\r\n    this.set(name, val);\r\n    this.reinsert(this.localScope.size - 1, index);\r\n  }\r\n\r\n  deleteAll() {\r\n    this.localScope.clear();\r\n    localStorage.removeItem(\"calc_variables\");\r\n  }\r\n\r\n  // takes element at [start] and moves it to [end]\r\n  reinsert(start, end) {\r\n    let result = Array.from(this.localScope, ([name, value]) => ({\r\n      name,\r\n      value,\r\n    }));\r\n\r\n    const [removed] = result.splice(start, 1);\r\n    result.splice(end, 0, removed);\r\n\r\n    this.localScope.clear();\r\n\r\n    for (let i = 0; i < result.length; i++) {\r\n      this.localScope.set(result[i].name, result[i].value);\r\n    }\r\n\r\n    this.toJSON();\r\n  }\r\n\r\n  fromJSON() {\r\n    if (!localStorage.getItem(\"calc_variables\")) return;\r\n    this.localScope = new Map(\r\n      JSON.parse(localStorage.getItem(\"calc_variables\"))\r\n    );\r\n  }\r\n\r\n  toJSON() {\r\n    localStorage.setItem(\r\n      \"calc_variables\",\r\n      JSON.stringify(Array.from(this.localScope.entries()))\r\n    );\r\n  }\r\n}\r\n\r\nexport default MathScope;\r\n","// React\r\n\r\nimport { Paper } from \"@material-ui/core\";\r\nimport CalculatorModule from \"../components/Modules/Calculator/CalculatorModule\";\r\n\r\n// MUI Stuff\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\n\r\nconst styles = (theme) => ({\r\n  ...theme.spreadIt,\r\n  root: {\r\n    marginLeft: 100, // temporary until john fixes his stuff\r\n    marginRight: 30,\r\n    marginTop: 50,\r\n    paddingLeft: 50,\r\n    paddingRight: 50,\r\n    paddingTop: 30,\r\n    minHeight: \"90%\",\r\n  },\r\n});\r\n\r\nconst Modules = (props) => {\r\n  const { classes } = props;\r\n  return (\r\n    <div className={classes.root}>\r\n      <CalculatorModule />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(Modules);\r\n"],"sourceRoot":""}